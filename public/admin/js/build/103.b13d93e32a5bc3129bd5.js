(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{"+jjq":function(t,s,e){"use strict";e.r(s);var a=e("9cKu").a,r=e("KHd+"),o=Object(r.a)(a,(function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"subheader",attrs:{id:"subheader"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"subheader__main"},[s("h3",{staticClass:"subheader__title"},[t._v("\n          "+t._s(t.$t("LBL_ORDER"))+" "+t._s(t.reasonType)+"\n        ")]),t._v(" "),s("div",{staticClass:"subheader__breadcrumbs"},[s("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[s("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),s("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),s("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_ORDERS")))])],1)])])]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-8"},[s("div",{staticClass:"portlet"},[s("div",{staticClass:"portlet__head align-items-center"},[s("div",{staticClass:"portlet__head-label"},[s("h3",{staticClass:"portlet__head-title"},[t._v("\n                "+t._s(t.$t("LBL_ORDER"))+" "+t._s(t.reasonType)+"\n              ")])]),t._v(" "),s("p",[t._v("\n              "+t._s(t.$t("LBL_ORDERS_NUMBER"))+":\n              "),s("strong",[t._v("#"+t._s(t.orders.order_id))])])]),t._v(" "),s("div",{staticClass:"portlet__body"},[s("ul",{staticClass:"list-group list-group-xs list-cart list-cart-order list-add-orders mb-5"},t._l(t.orders.products,(function(e,a){return s("li",{key:a,staticClass:"list-group-item order-cancel-item"},[s("div",{staticClass:"product-profile"},[s("div",{staticClass:"product-profile__thumbnail"},[s("a",{attrs:{href:"javascript:;"}},[s("img",{staticClass:"img-fluid",attrs:{src:t.$productImage(e.op_product_id,e.op_pov_code,e.images?t.$timestamp(e.images.afile_updated_at):"","39-52"),alt:"..."}})])]),t._v(" "),s("div",{staticClass:"product-profile__data"},[s("div",{staticClass:"title"},[s("a",{staticClass:"text-body",attrs:{href:"javascript:;"}},[t._v(t._s(e.op_product_name))])]),t._v(" "),e.op_product_variants?s("p",{staticClass:"options"},[JSON.parse(e.op_product_variants).styles?s("span",[t._v(t._s(Object.values(JSON.parse(e.op_product_variants).styles).join(" | ")))]):t._e()]):t._e(),t._v(" "),null===e.cancel_request?s("div",{staticClass:"product-quantity mt-2"},[s("div",{staticClass:"quantity quantity-2 d-inline-flex"},[s("span",{staticClass:"decrease",class:0==e.selectedQty?"disabled":"",on:{click:function(s){return t.updateQty(e,"less")}}},[s("i",{staticClass:"icn"},[s("svg",{staticClass:"svg"},[s("use",{attrs:{"xlink:href":t.baseUrl+"/dashboard/media/retina/sprite.svg#minus",href:t.baseUrl+"/dashboard/media/retina/sprite.svg#minus"}})])])]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedQty,expression:"product.selectedQty"}],staticClass:"qty-input no-focus YK-qty",attrs:{"data-page":"product-view",title:"Available Quantity",type:"text",min:"0",max:e.op_qty,value:"0",readonly:""},domProps:{value:e.selectedQty},on:{input:function(s){s.target.composing||t.$set(e,"selectedQty",s.target.value)}}}),t._v(" "),s("span",{staticClass:"increase",class:e.selectedQty==e.op_qty?"disabled":"",on:{click:function(s){return t.updateQty(e,"add")}}},[s("i",{staticClass:"icn"},[s("svg",{staticClass:"svg"},[s("use",{attrs:{"xlink:href":t.baseUrl+"/dashboard/media/retina/sprite.svg#add",href:t.baseUrl+"/dashboard/media/retina/sprite.svg#add"}})])])])]),t._v(" "),s("span",[t._v("x")]),t._v("\n                      "+t._s(t.currencySymbol)+t._s(t._f("numberFormat")(e.op_product_price))+"\n                      "),t.errors.first("selectedQty")?s("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("selectedQty")))]):t._e()]):t._e()])]),t._v(" "),e.cancel_request?s("div",{staticClass:"field-wrap-colm"},[t._v("\n                  "+t._s(t.$t("LBL_REQUEST_IS"))+"\n                  "+t._s(t._f("camelCase")(t._f("removeHyphen")(t.orderReturnStatus[e.cancel_request.orrequest_status])))+"\n                ")]):s("div",{staticClass:"field-wrap-colm"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.resaon,expression:"product.resaon"}],staticClass:"form-control",attrs:{disabled:0==e.selectedQty},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"resaon",s.target.multiple?a:a[0])}}},[t._l(t.retrunReasons,(function(e,a){return s("option",{key:a,domProps:{value:e.reason_id}},[t._v(t._s(e.reason_title))])})),t._v(" "),s("option",{domProps:{value:"others"}},[t._v("Others")])],2)]),t._v(" "),null===e.cancel_request?s("div",{staticClass:"product-price font-weight-bold"},[t._v("\n                  "+t._s(t.currencySymbol)+"\n                  "),s("span",[t._v(t._s(t._f("numberFormat")(e.op_product_price*e.selectedQty)))])]):t._e()])})),0)])])]),t._v(" "),s("div",{staticClass:"col-lg-4"},[s("div",{staticClass:"portlet"},[s("div",{staticClass:"portlet__head"},[s("div",{staticClass:"portlet__head-label"},[s("h3",{staticClass:"portlet__head-title"},[t._v(t._s(t.$t("LBL_TOTAL")))])])]),t._v(" "),s("div",{staticClass:"portlet__body"},[s("div",{staticClass:"pb-5"},[s("ul",{staticClass:"list-group list-group-sm list-group-flush-y list-group-flush-x"},[s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_SUBTOTAL")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[t._v(t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.subTotal)))])]),t._v(" "),s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_TAX")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[t._v(t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.tax)))])]),t._v(" "),1!=t.orders.order_shipping_type&&t.orders.digital_products!=t.orders.products.length?s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_SHIPPING")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[s("span",[t._v(t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.shipping)))])])]):t._e(),t._v(" "),0!=t.discount?s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_DISCOUNT")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[s("span",[t._v("- "+t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.discount)))])])]):t._e(),t._v(" "),0!=t.reward?s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_REWARD_AMOUNT")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[s("span",[t._v("- "+t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.reward)))])])]):t._e(),t._v(" "),0!=t.gift?s("li",{staticClass:"list-group-item d-flex"},[s("span",[t._v(t._s(t.$t("LBL_GIFT")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[s("span",[1!=t.orders.order_shipping_status?s("span",[t._v("-")]):t._e(),t._v("\n                      "+t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.gift))+"\n                    ")])])]):t._e(),t._v(" "),s("li",{staticClass:"list-group-item d-flex font-size-lg font-weight-bold"},[s("span",[t._v(t._s(t.$t("LBL_TOTAL")))]),t._v(" "),s("span",{staticClass:"ml-auto"},[t._v(t._s(t.currencySymbol)+t._s(t._f("numberFormat")(t.total)))])])])]),t._v(" "),s("h6",{staticClass:"pb-2 text-center"},[t._v("\n              "+t._s(t.reasonType)+" "+t._s(t.$t("LBL_BY"))+"\n              "+t._s(t._f("formatDate")(new Date))+"\n            ")]),t._v(" "),s("div",{staticClass:"form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"20",rows:"4",spellcheck:"false"},domProps:{value:t.comment},on:{input:function(s){s.target.composing||(t.comment=s.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("button",{staticClass:"btn btn-brand btn-block",attrs:{type:"button",disabled:0==t.subTotal},on:{click:function(s){return t.generateRequest()}}},[t._v("\n                "+t._s(t.$t("LBL_CONFIRM_YOUR"))+" "+t._s(t.reasonType)+"\n              ")])])])])])])]),t._v(" "),s("b-modal",{attrs:{id:"declinedModel",centered:"",title:"BootstrapVue","no-close-on-backdrop":""},scopedSlots:t._u([{key:"modal-header",fn:function(e){var a=e.close;return[s("h5",{staticClass:"modal-title"},[t.statusData?s("span",[t._v(t._s(t._f("camelCase")(t._f("removeHyphen")(t.statusData.status))))]):t._e(),t._v("\n        "+t._s(t.$t("LBL_MESSAGE"))+"\n      ")]),t._v(" "),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return a()}}})]}},{key:"modal-footer",fn:function(){return[s("button",{staticClass:"btn btn-brand",attrs:{type:"button"},on:{click:t.validateShippingStatus}},[t._v("\n        "+t._s(t.$t("BTN_ORDER_SAVE"))+"\n      ")])]},proxy:!0}])},[t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-lg-12"},[s("div",{staticClass:"form-group"},[s("label",[t._v(t._s(t.$t("LBL_COMMENT")))]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentData.message,expression:"commentData.message"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"message",spellcheck:"false","data-vv-validate-on":"none"},domProps:{value:t.commentData.message},on:{input:function(s){s.target.composing||t.$set(t.commentData,"message",s.target.value)}}}),t._v(" "),t.errors.first("message")?s("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("message")))]):t._e()])])])])],1)}),[],!1,null,null,null);s.default=o.exports},"9cKu":function(t,s,e){"use strict";(function(t){var e={payment_comment:"",payment_method:"",transaction_id:"",amount:""},a={message:"",tracking_number:"",courier_name:""};s.a={data:function(){return{currencySymbol:currencySymbol,orders:[],baseUrl:baseUrl,reasonType:"",adminsData:e,commentData:a,orderReturnStatus:[],retrunReasons:[],readonly:!1,statusData:{},comment:"",subTotal:0,declinedModelId:"declinedModel",productDiscountCount:0,discount:0,selectedStatus:0,tax:0,totalProducts:0,gift:0,shipping:0,total:0,reward:0,returnShipping:0}},methods:{updateQty:function(t,s){if("add"==s){if(t.op_qty==t.selectedQty)return;t.selectedQty=t.selectedQty+1}else{if(0==t.selectedQty)return;t.selectedQty=t.selectedQty-1}this.update()},pageLoadData:function(t){var s=this;this.$http.post(adminBaseUrl+"/orders/request-details/"+t).then((function(t){var e=t.data.data;s.orders=e.order,s.orderReturnStatus=e.orderReturnStatus,s.reasonType=e.reasonType,s.retrunReasons=e.retrunReasons,s.returnShipping=e.returnShipping,s.productDiscountCount=e.productDiscountCount,s.totalProducts=s.orders.products.length;var a=0;0!=e.retrunReasons.length&&(a=e.retrunReasons[0].reason_id),Object.keys(s.orders.products).forEach((function(t){s.orders.products[t].selectedQty=0,s.orders.products[t].resaon=a}))}))},generateRequest:function(){var s=this,e=0,a=[];if(Object.keys(this.orders.products).forEach((function(t){0!=s.orders.products[t].selectedQty&&a.push({id:s.orders.products[t].op_id,qty:s.orders.products[t].selectedQty,reason:s.orders.products[t].resaon}),e+=s.orders.products[t].selectedQty})),0!=e){var r=this.$serializeData({items:JSON.stringify(a),message:this.commentData.message,tracking_number:this.commentData.tracking_number,courier_name:this.commentData.courier_name,comment:this.comment,shipping:this.shipping,"order-id":this.orders.order_id,"selected-status":"apporved"});this.$http.post(adminBaseUrl+"/orders/create-request",r).then((function(t){s.$router.push({name:"orders"})}))}else t.error(this.$t("NOTI_PLEASE_ENTER_QTY"),"",t.options)},validateShippingStatus:function(){var t=this;this.$validator.validateAll(this.commentData).then((function(s){s&&(t.selectedStatus=t.statusData.id,t.$bvModal.hide(t.declinedModelId))}))},updateOrderStatus:function(t,s){this.statusData={id:t,status:s},this.$bvModal.show(this.declinedModelId)},inArray:function(t,s){for(var e=s.length,a=0;a<e;a++)if(s[a]==t)return!0;return!1},update:function(){var t=this,s=0,e=0,a=this.orders.order_shipping_value,r=0,o=0,i=0,n=0,d=0;this.reward=0;var l=0,c=0;this.productSubTotal(this.orders);Object.keys(this.orders.products).forEach((function(a){0!=t.orders.products[a].selectedQty&&(parseFloat(t.$orderSubTotal(t.orders))+parseFloat(t.orders.order_tax_charged),t.orders.products[a].tax&&"tax"==t.orders.products[a].tax.opc_type&&(t.orders.products[a].tax.opc_value,e+=parseFloat(t.orders.products[a].tax.opc_value)*t.orders.products[a].selectedQty),0!=t.orders.order_discount_amount&&0!=t.orders.order_discount_amount&&(c=t.orders.products[a].opainfo_discount_amount),0!=t.orders.order_reward_amount&&(l=t.orders.order_net_amount*t.orders.products[a].opainfo_reward_rate/100/t.orders.products[a].op_qty),s+=t.orders.products[a].selectedQty*t.orders.products[a].op_product_price,t.orders.order_gift_amount&&t.orders.products[a].opainfo_gift_amount&&(d+=parseFloat(t.orders.products[a].opainfo_gift_amount*t.orders.products[a].selectedQty)),n+=parseFloat(l*t.orders.products[a].selectedQty),r+=parseFloat(c*t.orders.products[a].selectedQty)),o+=parseFloat(t.orders.products[a].op_qty),i+=parseFloat(t.orders.products[a].selectedQty)})),(o!=i||1!=this.$inArray(this.orders.order_shipping_status,[1,2])&&0==this.$configVal("RETURN_SHIPPING_ENABLE"))&&(a=0),this.subTotal=s,this.tax=e,this.shipping=a,this.gift=d,this.discount=r;var u=parseFloat(s)+parseFloat(e)+parseFloat(a)-r;1==this.orders.order_shipping_status&&(u=parseFloat(u)+parseFloat(d)),u<0&&(u=0),this.total=u,0!=this.orders.order_reward_amount&&(this.total=n,this.reward=u-n>0?parseFloat(u-n):0)},productSubTotal:function(t){var s=0;return Object.keys(t.products).forEach((function(e){s+=parseFloat(t.products[e].op_product_price*t.products[e].op_qty)})),s}},mounted:function(){var t=this.$route.params.id;this.pageLoadData(t)}}}).call(this,e("hUol"))}}]);