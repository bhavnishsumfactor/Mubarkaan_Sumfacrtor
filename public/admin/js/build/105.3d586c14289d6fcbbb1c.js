(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{"/xub":function(e,t,a){"use strict";(function(e,a){var s={page_id:"",page_name:"",page_content:"",page_publish:""},i={page_name:""};t.a={data:function(){return{baseUrl:baseUrl,records:[],types:[],ModalID:"deleteModel",pagination:[],clicked:0,loading:!1,recordData:s,searchData:i,search:"",recordId:"",pageId:"",pageName:""}},computed:{isActived:function(){return this.pagination.current_page},pagesNumber:function(){return this.$pagesNumber(this.pagination)},isComplete:function(){return this.pageName}},watch:{$route:"refreshedSearchData"},methods:{refreshedSearchData:function(){this.$route.query.s&&(this.search=this.$route.query.s),this.pageRecords(1,!0)},emptyFormValues:function(){this.recordData={page_id:"",page_name:"",page_content:"",page_publish:""},this.errors.clear()},pageRecords:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2?arguments[2]:void 0;this.loading=a,Object.assign(this.searchData,{search:this.search});var i=this.$serializeData(this.searchData);void 0!==s&&i.append("showLastPage",1),this.$http.post(adminBaseUrl+"/pages/list?page="+e,i).then((function(e){t.records=e.data.data.pages.data,t.types=e.data.data.types,t.loading=!1,t.pagination=e.data.data.pages}))},currentPage:function(e){this.pageRecords(e)},searchRecords:function(){this.pageRecords(this.pagination.current_page)},clearSearch:function(){this.searchData={page_name:""},this.pageRecords(this.pagination.current_page)},onSwitchStatus:function(t,a){var s=this.$serializeData({status:t.target.checked});this.$http.post(adminBaseUrl+"/pages/status/"+a,s).then((function(t){0!=t.data.status?e.success(t.data.message,"",e.options):e.error(t.data.message,"",e.options)}))},openEditPage:function(t){3==t.page_type?this.$router.push({name:"settingsProductListing"}):4==t.page_type?this.$router.push({name:"settingsProductDetail"}):this.$canWrite("PAGES")?window.location.replace(adminBaseUrl+"/pages/"+t.page_id+"/edit"):e.error("Un-autorized Access","",e.options)},confirmDelete:function(e){this.recordId=e,this.$bvModal.show(this.ModalID)},deleteRecord:function(t){var a=this;this.$http.delete(adminBaseUrl+"/pages/"+t).then((function(t){0!=t.data.status?(e.success(t.data.message,"",e.options),a.pageRecords(a.pagination.current_page),a.$bvModal.hide(a.ModalID)):e.error(t.data.message,"",e.options)}))},copyLinkToClipboard:function(t){t&&t.urlrewrite_custom?t=baseUrl+"/"+t.urlrewrite_custom:t&&t.urlrewrite_original&&(t=baseUrl+"/"+t.urlrewrite_original);var s=a("<input>");a("body").append(s),s.val(t).select(),document.execCommand("copy"),s.remove(),e.success(this.$t("NOTI_PAGE_URL_COPIED"),"",e.options)},pageUrl:function(e){return e&&e.urlrewrite_custom?e=baseUrl+"/"+e.urlrewrite_custom:e&&e.urlrewrite_original&&(e=baseUrl+"/"+e.urlrewrite_original),e},promptClonePage:function(e){this.pageId=e,this.$bvModal.show("cloneModel")},clonePage:function(){var t=this;this.clicked=1;var a=this.$serializeData({page_id:this.pageId,page_name:this.pageName});this.$http.post(adminBaseUrl+"/pages/duplicate",a).then((function(a){0!=a.data.status?(e.success(a.data.message,"",e.options),t.pageRecords(t.pagination.current_page,!1,1),t.$bvModal.hide("cloneModel"),t.pageId="",t.pageName="",t.clicked=0):e.error(a.data.message,"",e.options)}),(function(e){t.clicked=0,t.validateErrors(e)}))},validateErrors:function(e){var t=this;this.errors.clear();var a=e.data;Object.keys(a.errors).forEach((function(e){t.errors.add({field:e,msg:a.errors[e][0]})}))}},mounted:function(){this.search="",this.refreshedSearchData()}}}).call(this,a("hUol"),a("EVdn"))},VTIZ:function(e,t,a){"use strict";a.r(t);var s=a("/xub").a,i=a("KHd+"),r=Object(i.a)(s,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"subheader",attrs:{id:"subheader"}},[t("div",{staticClass:"container"},[t("div",{staticClass:"subheader__main"},[t("h3",{staticClass:"subheader__title"},[e._v(e._s(e.$t("LBL_PAGES")))]),e._v(" "),t("div",{staticClass:"subheader__breadcrumbs"},[t("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[t("i",{staticClass:"flaticon2-shelter"})]),e._v(" "),t("span",{staticClass:"subheader__breadcrumbs-separator"}),e._v(" "),t("span",{staticClass:"subheader__breadcrumbs-link"},[e._v(e._s(e.$t("LBL_CMS")))]),e._v(" "),t("span",{staticClass:"subheader__breadcrumbs-separator"}),e._v(" "),t("span",{staticClass:"subheader__breadcrumbs-link"},[e._v(e._s(e.$t("LBL_PAGES")))])],1)])])]),e._v(" "),t("div",{staticClass:"container"},[t("div",{staticClass:"row justify-content-center"},[t("div",{staticClass:"col-xl-8"},[t("div",{staticClass:"portlet portlet--height-fluid"},[t("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-12"},[t("div",{staticClass:"form-group"},[t("div",{staticClass:"input-icon input-icon--left"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:e.$t("PLH_SEARCH")+"...",id:"generalSearch"},domProps:{value:e.search},on:{keyup:e.searchRecords,input:function(t){t.target.composing||(e.search=t.target.value)}}}),e._v(" "),e._m(0),e._v(" "),""!=e.search?t("span",{staticClass:"input-icon__icon input-icon__icon--right",on:{click:function(t){e.search="",e.pageRecords(1)}}},[e._m(1)]):e._e()])])])])]),e._v(" "),t("hr",{staticClass:"m-0"}),e._v(" "),e.records.length>0?t("div",{staticClass:"portlet__body portlet__body--fit"},[t("div",{staticClass:"section"},[t("div",{staticClass:"section__content"},[t("table",{staticClass:"table table-data table-justified"},[t("thead",[t("tr",[t("th",[e._v(e._s("#"))]),e._v(" "),t("th",[e._v(e._s(e.$t("LBL_PAGES_NAME")))]),e._v(" "),t("th",[e._v(e._s(e.$t("LBL_PUBLISH")))]),e._v(" "),t("th")])]),e._v(" "),t("tbody",e._l(e.records,(function(a,s){return t("tr",{key:a.page_id,attrs:{"data-id":a.page_id}},[t("td",{attrs:{scope:"row"}},[e._v(e._s(e.pagination.from+s))]),e._v(" "),t("td",[e._v(e._s(a.page_name))]),e._v(" "),t("td",[t("label",{staticClass:"switch switch--sm"},[0==a.page_default?t("input",{directives:[{name:"model",rawName:"v-model",value:a.page_publish,expression:"record.page_publish"}],attrs:{type:"checkbox",name:"page_publish",disabled:!e.$canWrite("PAGES")},domProps:{checked:Array.isArray(a.page_publish)?e._i(a.page_publish,null)>-1:a.page_publish},on:{change:[function(t){var s=a.page_publish,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=e._i(s,null);i.checked?n<0&&e.$set(a,"page_publish",s.concat([null])):n>-1&&e.$set(a,"page_publish",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"page_publish",r)},function(t){return e.onSwitchStatus(t,a.page_id)}]}}):e._e(),e._v(" "),1==a.page_default?t("input",{directives:[{name:"model",rawName:"v-model",value:a.page_publish,expression:"record.page_publish"}],attrs:{type:"checkbox",name:"page_publish",readonly:"readonly",disabled:"disabled"},domProps:{checked:Array.isArray(a.page_publish)?e._i(a.page_publish,null)>-1:a.page_publish},on:{change:function(t){var s=a.page_publish,i=t.target,r=!!i.checked;if(Array.isArray(s)){var n=e._i(s,null);i.checked?n<0&&e.$set(a,"page_publish",s.concat([null])):n>-1&&e.$set(a,"page_publish",s.slice(0,n).concat(s.slice(n+1)))}else e.$set(a,"page_publish",r)}}}):e._e(),e._v(" "),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:1==a.page_publish?e.$t("TTL_UNPUBLISH"):e.$t("TTL_PUBLISH")}})])]),e._v(" "),t("td",[t("div",{staticClass:"actions"},[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[e.$canWrite("PAGES")?"":"disabled no-drop"],attrs:{title:e.$t("TTL_EDIT"),href:"javascript:;"},on:{click:function(t){return t.preventDefault(),e.openEditPage(a)}}},[t("svg",[t("use",{attrs:{"xlink:href":e.baseUrl+"/admin/images/retina/sprite.svg#edit-icon"}})])]),e._v(" "),3!=a.page_type&&4!=a.page_type?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[e.$canRead("PAGES")?"":"disabled no-drop"],attrs:{title:e.$t("TTL_PREVIEW"),href:e.pageUrl(a.url_rewrite),target:"_blank"}},[t("svg",[t("use",{attrs:{"xlink:href":e.baseUrl+"/admin/images/retina/sprite.svg#view"}})])]):e._e(),e._v(" "),3!=a.page_type&&4!=a.page_type?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[e.$canWrite("PAGES")?"":"disabled no-drop"],attrs:{title:e.$t("TTL_COPY_LINK"),href:"javascript:;"},on:{click:function(t){return e.copyLinkToClipboard(a.url_rewrite)}}},[t("svg",[t("use",{attrs:{"xlink:href":e.baseUrl+"/admin/images/retina/sprite.svg#links"}})])]):e._e(),e._v(" "),"content"==e.types[a.page_id]?t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[e.$canWrite("PAGES")?"":"disabled no-drop"],attrs:{title:e.$t("TTL_CLONE"),href:"javascript:;"},on:{click:function(t){return e.promptClonePage(a.page_id)}}},[t("i",{staticClass:"flaticon2-copy"})]):e._e(),e._v(" "),0==a.page_default?t("span",[t("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[e.$canWrite("PAGES")?"":"disabled no-drop"],attrs:{title:e.$t("TTL_DELETE"),href:"javascript:;"},on:{click:function(t){return e.confirmDelete(a.page_id)}}},[t("svg",[t("use",{attrs:{"xlink:href":e.baseUrl+"/admin/images/retina/sprite.svg#delete-icon"}})])])]):e._e()])])])})),0)])])])]):e._e(),e._v(" "),e.loading?t("loader"):e._e(),e._v(" "),0==e.loading&&0==e.records.length?t("noRecordsFound"):e._e(),e._v(" "),e.records.length>0?t("div",{staticClass:"portlet__foot"},[t("pagination",{attrs:{pagination:e.pagination},on:{currentPage:e.currentPage}})],1):e._e(),e._v(" "),t("DeleteModel",{attrs:{deletePopText:e.$t("LBL_DELETE_PAGE_CONFIRM_TEXT"),recordId:e.recordId},on:{deleted:function(t){return e.deleteRecord(e.recordId)}}}),e._v(" "),t("b-modal",{attrs:{id:"cloneModel",centered:"",title:"BootstrapVue"},scopedSlots:e._u([{key:"modal-header",fn:function(){return[t("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[e._v(e._s(e.$t("LBL_CLONE_PAGE")))]),e._v(" "),t("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return e.$bvModal.hide("cloneModel")}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[t("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary",class:1==e.clicked&&"gb-is-loading",attrs:{type:"button","data-dismiss":"modal",disabled:!e.isComplete||1==e.clicked},on:{click:e.clonePage}},[e._v(e._s(e.$t("BTN_CLONE")))])]},proxy:!0}])},[e._v(" "),t("div",{staticClass:"form-group row"},[t("label",{staticClass:"col-xl-6 col-lg-6 col-form-label"},[e._v(e._s(e.$t("LBL_PAGE_NAME")))]),e._v(" "),t("div",{staticClass:"col-lg-6 col-xl-6"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.pageName,expression:"pageName"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"page_name","data-vv-as":e.$t("LBL_PAGE_NAME"),"data-vv-validate-on":"none"},domProps:{value:e.pageName},on:{input:function(t){t.target.composing||(e.pageName=t.target.value)}}}),e._v(" "),e.errors.first("page_name")?t("span",{staticClass:"error text-danger"},[e._v(e._s(e.errors.first("page_name")))]):e._e()])])])],1)])])])])}),[function(){var e=this._self._c;return e("span",{staticClass:"input-icon__icon input-icon__icon--left"},[e("span",[e("i",{staticClass:"la la-search"})])])},function(){var e=this._self._c;return e("span",[e("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);t.default=r.exports}}]);