(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{FDS0:function(a,e,t){"use strict";t.r(e);var s=t("GIty").a,r=t("KHd+"),i=Object(r.a)(s,(function(){var a=this,e=a._self._c;return e("div",[e("div",{staticClass:"subheader",attrs:{id:"subheader"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"subheader__main"},[e("h3",{staticClass:"subheader__title"},[a._v(a._s(a.$t("LBL_ROLE_SETUP")))]),a._v(" "),e("div",{staticClass:"subheader__breadcrumbs"},[e("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[e("i",{staticClass:"flaticon2-shelter"})]),a._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),e("span",{staticClass:"subheader__breadcrumbs-link"},[a._v(a._s(a.$t("LBL_USERS")))]),a._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),e("router-link",{staticClass:"subheader__breadcrumbs-link",attrs:{to:{name:"roles"}}},[a._v(a._s(a.$t("LBL_ROLES")))]),a._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),e("span",{staticClass:"subheader__breadcrumbs-link"},[a._v(a._s(a.$t("LBL_ROLE_SETUP")))])],1)])])]),a._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"portlet portlet-no-min-height"},[e("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"portlet__head-toolbar"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.role_name,expression:"rolesData.role_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",placeholder:a.$t("PLH_PLEASE_ENTER_ROLE_NAME"),name:"role_name","data-vv-as":a.$t("LBL_ROLE_NAME"),"data-vv-validate-on":"none","aria-required":"true","aria-invalid":"false"},domProps:{value:a.rolesData.role_name},on:{input:function(e){e.target.composing||a.$set(a.rolesData,"role_name",e.target.value)}}}),a._v(" "),a.errors.first("role_name")?e("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("role_name")))]):a._e(),a._v(" "),"editform"==a.selectedPage?e("div",{staticClass:"portlet__head-actions",attrs:{id:"tooltip-target-1"}},[e("i",{staticClass:"fas fa-info-circle px-2"})]):a._e(),a._v(" "),"editform"==a.selectedPage?e("b-popover",{staticClass:"popover-cover",attrs:{target:"tooltip-target-1",triggers:"hover",placement:"top"}},[e("div",{staticClass:"list-stats"},[e("div",{staticClass:"lable"},[e("span",{staticClass:"stats_title"},[a._v(a._s(a.$t("LBL_CREATED"))+":")]),a._v(" "),e("span",{staticClass:"time"},[a._v(a._s(a.createdByUser?a.createdByUser+" |":"")+" "+a._s(a._f("formatDateTime")(a.createdAt)))])]),a._v(" "),e("div",{staticClass:"lable"},[e("span",{staticClass:"stats_title"},[a._v(a._s(a.$t("LBL_LAST_UPDATED"))+":")]),a._v(" "),e("span",{staticClass:"time"},[a._v(a._s(a.updatedByUser?a.updatedByUser+" |":"")+" "+a._s(a._f("formatDateTime")(a.updatedAt)))])])])]):a._e()],1)])])])])]),a._v(" "),e("div",{staticClass:"portlet"},[e("div",{staticClass:"portlet__body pb-0 bg-gray"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-icon input-icon--left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.searchData.search,expression:"searchData.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:a.$t("PLH_SEARCH")+"...",id:"generalSearch"},domProps:{value:a.searchData.search},on:{keyup:a.searchRecords,input:function(e){e.target.composing||a.$set(a.searchData,"search",e.target.value)}}}),a._v(" "),a._m(0),a._v(" "),""!=a.searchData.search?e("span",{staticClass:"input-icon__icon input-icon__icon--right",on:{click:function(e){a.searchData.search="",a.pageloadData(!0)}}},[a._m(1)]):a._e()])])])]),a._v(" "),e("div",{staticClass:"row",class:[a.$canWrite("ADMIN_USERS")?"":"disabledbutton"]},[a._l(a.permissionSections,(function(t,s){return e("div",{key:"rolestab"+s,staticClass:"col-xl-6 col-md-12 mb-4"},[e("div",{staticClass:"portlet portlet-no-min-height portlet--height-fluid"},[e("div",{staticClass:"portlet__body"},[e("ul",{staticClass:"list-group"},[e("li",{staticClass:"list-group-item"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto col-md-6"},[e("div",[e("h5",[a._v(a._s(a.$t(s)))])])]),a._v(" "),e("div",{staticClass:"col col-md-2"},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.roleGroup[s],expression:"rolesData.roleGroup[index]"}],attrs:{type:"radio",name:"radiorole-"+s},domProps:{value:0,checked:a._q(a.rolesData.roleGroup[s],0)},on:{click:function(e){return a.changePermissionType(s,0)},change:function(e){return a.$set(a.rolesData.roleGroup,s,0)}}}),a._v(" "+a._s(a.$t("LBL_PERMISSION_NONE"))+" \n                                                        "),e("span")])])]),a._v(" "),e("div",{staticClass:"col col-md-2"},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.roleGroup[s],expression:"rolesData.roleGroup[index]"}],attrs:{type:"radio",name:"radiorole-"+s,disabled:"System Settings"==s},domProps:{value:1,checked:a._q(a.rolesData.roleGroup[s],1)},on:{click:function(e){return a.changePermissionType(s,1)},change:function(e){return a.$set(a.rolesData.roleGroup,s,1)}}}),a._v(" "+a._s(a.$t("LBL_PERMISSION_READ"))+" \n                                                        "),e("span")])])]),a._v(" "),e("div",{staticClass:"col col-md-2"},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.roleGroup[s],expression:"rolesData.roleGroup[index]"}],attrs:{type:"radio",name:"radiorole-"+s,disabled:"Dashboard"==s},domProps:{value:2,checked:a._q(a.rolesData.roleGroup[s],2)},on:{click:function(e){return a.changePermissionType(s,2)},change:function(e){return a.$set(a.rolesData.roleGroup,s,2)}}}),a._v(" "+a._s(a.$t("LBL_PERMISSION_WRITE"))+"\n                                                "),e("span")])])])])]),a._v(" "),a._l(t,(function(t,r){return e("li",{key:"modules"+r,staticClass:"list-group-item",attrs:{id:r}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-auto col-md-6"},[e("div",{domProps:{innerHTML:a._s(a.$options.filters.highlight(a.$t(t),a.searchData.search))}})]),a._v(" "),e("div",{staticClass:"col col-md-2"},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.role[r],expression:"rolesData.role[roleIndex]"}],attrs:{type:"radio",value:"0"},domProps:{checked:a._q(a.rolesData.role[r],"0")},on:{click:function(e){return a.unCheckedCheckbox(r,s)},change:function(e){return a.$set(a.rolesData.role,r,"0")}}}),a._v(" "),e("span")])])]),a._v(" "),e("div",{staticClass:"col col-md-2",class:["System Settings"==s?"disabled":""]},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.role[r],expression:"rolesData.role[roleIndex]"}],attrs:{type:"radio",value:"1",disabled:"System Settings"==s},domProps:{checked:a._q(a.rolesData.role[r],"1")},on:{click:function(e){return a.unCheckedCheckbox(r,s)},change:function(e){return a.$set(a.rolesData.role,r,"1")}}}),a._v(" "),e("span")])])]),a._v(" "),e("div",{staticClass:"col col-md-2"},[e("div",[e("label",{staticClass:"checkbox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:a.rolesData.role[r],expression:"rolesData.role[roleIndex]"}],attrs:{type:"radio",value:"2",disabled:"Dashboard"==s},domProps:{checked:a._q(a.rolesData.role[r],"2")},on:{click:function(e){return a.unCheckedCheckbox(r,s)},change:function(e){return a.$set(a.rolesData.role,r,"2")}}}),a._v(" "),e("span")])])])])])})),a._v(" "),"System Settings"==s?e("p",{staticClass:"text-muted form-text mt-3"},[a._v(" "+a._s(a.$t("LBL_NOTE"))+" "+a._s(a.$t("LBL_PERMISSION_DISCLAIMER")))]):a._e()],2)])])])})),a._v(" "),""!=a.searchData.search&&0==Object.keys(a.permissionSections).length?e("div",{staticClass:"col-xl-12 col-md-12 mb-4"},[e("div",{staticClass:"portlet portlet--height-fluid"},[e("noRecordsFound")],1)]):a._e()],2)]),a._v(" "),e("div",{staticClass:"portlet__foot"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("router-link",{staticClass:"btn btn-secondary btn-wide",attrs:{to:{name:"roles"}}},[a._v(a._s(a.$t("BTN_DISCARD")))])],1),a._v(" "),e("div",{staticClass:"col-auto"},[e("button",{staticClass:"btn btn-brand btn-wide gb-btn gb-btn-primary",class:[1==a.clicked&&"gb-is-loading",a.$canWrite("ADMIN_USERS")?"":"disabledbutton"],attrs:{type:"button",disabled:!a.isComplete||1==a.clicked},on:{click:function(e){return a.validateRecord()}}},[a._v(a._s("addform"==this.selectedPage?a.$t("BTN_ROLE_CREATE"):a.$t("BTN_ROLE_UPDATE")))])])])])])])])}),[function(){var a=this._self._c;return a("span",{staticClass:"input-icon__icon input-icon__icon--left"},[a("span",[a("i",{staticClass:"la la-search"})])])},function(){var a=this._self._c;return a("span",[a("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);e.default=i.exports},GIty:function(a,e,t){"use strict";(function(a){var t={role_name:"",role:{},roleGroup:{},role_id:""},s={search:""};e.a={data:function(){return{permissionSections:[],originalPermissionSection:[],rolesData:t,searchData:s,clicked:0,selectedPage:"",createdByUser:"",updatedByUser:"",updatedAt:"",createdAt:"",showEmpty:1}},computed:{isComplete:function(){return this.rolesData.role_name}},methods:{validateErrors:function(a){var e=this,t=a.data;Object.keys(t.errors).forEach((function(a){e.errors.add({field:a,msg:t.errors[a][0]})}))},validateRecord:function(){var a=this;this.$validator.validateAll().then((function(e){e?(a.clicked=1,void 0===a.$route.params.id?a.saveRoles():a.updateRoles()):a.clicked=0}))},saveRoles:function(){var e=this,t=this.$serializeData({role_name:this.rolesData.role_name,role:JSON.stringify(this.rolesData.role)});this.$http.post(adminBaseUrl+"/roles",t).then((function(t){if(0==t.data.status)return e.clicked=0,void a.error(t.data.message,"",a.options);a.success(t.data.message,"",a.options),e.clicked=0,e.$router.push({name:"roles"})}),(function(a){e.clicked=0,e.validateErrors(a)}))},updateRoles:function(){var e=this,t=this.$serializeData({role_id:this.rolesData.role_id,role_name:this.rolesData.role_name,role:JSON.stringify(this.rolesData.role),roleGroup:JSON.stringify(this.rolesData.roleGroup)});t.append("_method","PUT"),this.clicked=1,this.$http.post(adminBaseUrl+"/roles/"+this.rolesData.role_id,t).then((function(t){if(0==t.data.status)return e.clicked=0,void a.error(t.data.message,"",a.options);a.success(t.data.message,"",a.options),e.clicked=0,e.$router.push({name:"roles"})}),(function(a){e.clicked=0,e.validateErrors(a)}))},pageloadData:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$http.get(adminBaseUrl+"/roles/get-all-permission-section").then((function(t){a.permissionSections=t.data.data,a.originalPermissionSection=Object.assign({},t.data.data),0==e&&(a.rolesData.role_name=t.data.data.role_name,a.rolesData.role_id=t.data.data.role_id,a.rolesData.role={},a.rolesData.roleGroup=[])}))},pageRecord:function(){var a=this,e=this.$route.params.id;this.$http.get(adminBaseUrl+"/roles/"+e).then((function(e){a.permissionSections=e.data.data.permissions,a.originalPermissionSection=Object.assign({},e.data.data.permissions),a.rolesData.role_name=e.data.data.role_name,a.rolesData.role_id=e.data.data.role_id,Object.keys(e.data.data.role).length>1&&(a.rolesData.role=e.data.data.role),"editform"==a.selectedPage&&(null!=e.data.data.created_at&&"admin_username"in e.data.data.created_at&&(a.createdByUser=e.data.data.created_at.admin_username),null!=e.data.data.updated_at&&"admin_username"in e.data.data.updated_at&&(a.updatedByUser=e.data.data.updated_at.admin_username),a.updatedAt=e.data.data.role_updated_at?e.data.data.role_updated_at:"",a.createdAt=e.data.data.role_created_at?e.data.data.role_created_at:"",a.rolesData.roleGroup=[])}))},changePermissionType:function(a,e){var t=this;Object.keys(this.permissionSections[a]).forEach((function(a){t.rolesData.role[a]=e,t.$forceUpdate()}))},searchRecords:function(){var a=this;this.rolesData.roleGroup.Products=!1,this.permissionSections=Object.assign({},this.originalPermissionSection),Object.keys(this.permissionSections).forEach((function(e){var t=0;e.toLowerCase().includes(a.searchData.search)||(Object.values(a.permissionSections[e]).forEach((function(e){if(e.toLowerCase().includes(a.searchData.search))return t=1,!1})),0==t&&delete a.permissionSections[e])}))},emptyUpdatedFieldValue:function(){this.createdByUser="",this.updatedByUser="",this.updatedAt="",this.createdAt=""},unCheckedCheckbox:function(a,e){delete this.rolesData.role[a],delete this.rolesData.roleGroup[e],this.$forceUpdate()}},mounted:function(){this.searchData.search="",void 0===this.$route.params.id?(this.pageloadData(),this.selectedPage="addform"):(this.pageRecord(),this.selectedPage="editform")}}}).call(this,t("hUol"))}}]);