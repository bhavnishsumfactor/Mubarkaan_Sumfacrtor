(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{ctSN:function(t,a,e){"use strict";e.r(a);var s=e("wDEh").a,i=e("KHd+"),r=Object(i.a)(s,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"subheader",attrs:{id:"subheader"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"subheader__main"},[a("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_PRODUCT_REVIEWS")))]),t._v(" "),a("div",{staticClass:"subheader__breadcrumbs"},[a("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[a("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v("\n                        "+t._s(t.$t("LBL_PRODUCTS"))+" ")]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("router-link",{staticClass:"subheader__breadcrumbs-link",attrs:{to:{name:"productReviewsListing"}}},[t._v(t._s(t.$t("LNK_PRODUCT_REVIEWS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v("\n                        "+t._s(t.$t("LBL_REVIEW_DETAIL"))+" ")])],1)]),t._v(" "),a("div",{staticClass:"subheader__toolbar"},[a("div",{staticClass:"subheader__wrapper"},[a("router-link",{staticClass:"btn btn-subheader",attrs:{to:{name:"productReviewsListing"}}},[t._v(" "+t._s(t.$t("BTN_BACK")))])],1)])])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"portlet product-reviews",attrs:{id:"page_portlet"}},[a("div",{staticClass:"portlet__head"},[a("div",{staticClass:"portlet__head-label"},[a("h3",{staticClass:"portlet__head-title",attrs:{title:t.adminsData.preview_title}},[t._v(" "+t._s(t._f("truncate")(t.adminsData.preview_title,80))+" ")])]),t._v(" "),a("div",{staticClass:"portlet__head-toolbar"})]),t._v(" "),a("div",{staticClass:"portlet__body"},[a("div",{staticClass:"section"},[a("div",{staticClass:"section__body"},[a("div",{staticClass:"row mb-2"},[a("div",{staticClass:"col-lg-1"},[a("div",{staticClass:"profile-wrapper"},[a("a",{attrs:{target:"_blank",href:t.baseUrl+"/product/"+t.adminsData.preview_prod_id}},[a("div",{staticClass:"avatar"},[t.adminsData.preview_prod_id?a("img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{src:t.$productImage(t.adminsData.preview_prod_id,null!=t.adminsData.op_pov_code?t.adminsData.op_pov_code:"0",t.adminsData.get_updated_image?t.$timestamp(t.adminsData.get_updated_image.afile_updated_at):"","40-53"),title:t.adminsData.prod_name}}):t._e()])])])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("h6",{staticClass:"text-muted mb-2"},[t._v(t._s(t.$t("LBL_CUSTOMER"))+":")]),t._v(" "),a("p",{},[a("router-link",{attrs:{to:{name:"users",params:{id:t.adminsData.preview_user_id}}}},[t._v(t._s(t.adminsData.username))])],1)]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("h6",{staticClass:"text-muted mb-2"},[t._v(t._s(t.$t("LBL_ORDER"))+":")]),t._v(" "),a("p",{},[a("router-link",{attrs:{to:{name:"orderDetail",params:{id:t.adminsData.preview_order_id}}}},[t._v("#"+t._s(t.adminsData.preview_order_id))])],1)]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("h6",{staticClass:"text-muted mb-2"},[t._v(t._s(t.$t("LBL_ORDER_DATE"))+":")]),t._v(" "),a("p",{},[t._v("\n                                            "+t._s(t._f("formatDate")(t.adminsData.order_date_added))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"col-lg-3"},[a("h6",{staticClass:"text-muted mb-2"},[t._v(t._s(t.$t("LBL_REVIEW_POSTED_ON"))+":")]),t._v(" "),a("p",{},[t._v("\n                                            "+t._s(t._f("formatDate")(t.adminsData.preview_created_at))+"\n                                        ")])]),t._v(" "),a("div",{staticClass:"col-lg-2"},[a("h6",{staticClass:"text-muted mb-2"},[t._v(t._s(t.$t("LBL_RATING"))+":")]),t._v(" "),a("div",{staticClass:"rating-holder"},[a("ratingStars",{attrs:{rating:t.adminsData.preview_rating}})],1)])]),t._v(" "),a("div",{staticClass:"bg-light"},[a("div",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_DESCRIPTION")))]),t._v(" "),a("p",[t._v(t._s(t.adminsData.preview_description))])]),t._v(" "),null!=t.adminsData.reply?a("p",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_REVIEW_ADMIN_REPLY"))),a("br"),t._v(" "),a("small",[t._v(t._s(t._f("formatDateTime")(t.adminsData.reply.prc_created_at)))])]),t._v(" "),a("span",{domProps:{innerHTML:t._s(t.$nl2br(t.adminsData.reply.prc_comments))}})]):t._e()]),t._v(" "),a("hr"),t._v(" "),t.adminsData.attached_files.length>0?a("div",{staticClass:"media-group my-5"},[t._l(t.adminsData.attached_files.slice(0,3),(function(e,s){return a("a",{key:s,staticClass:"media media--circle",attrs:{href:"javascript:;"},on:{click:function(a){return t.openGallery(s)}}},[a("img",{attrs:{src:"yokart/image/"+e.afile_id+"/small?t="+t.$timestamp(e.afile_updated_at),alt:"image"}})])})),t._v(" "),t.adminsData.attached_files.length>3?a("a",{staticClass:"media media--circle",attrs:{href:"javascript:;","data-toggle":"tooltip","data-skin":"brand","data-placement":"top",title:"","data-original-title":""},on:{click:function(a){return t.openGallery(3)}}},[a("span",[t._v(t._s(t.adminsData.attached_files.length-3)+"+")])]):t._e(),t._v(" "),a("LightBox",{ref:"lightbox",attrs:{media:t.media,showLightBox:!1}})],2):t._e(),t._v(" "),null!=t.adminsData.product_review_log?a("hr"):t._e(),t._v(" "),null!=t.adminsData.product_review_log?a("div",{staticClass:"card-body bg-light"},[a("p",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_POSTED_ON")))]),t._v("   "+t._s(t._f("formatDate")(t.adminsData.product_review_log.prl_preview_created_at)))]),t._v(" "),a("div",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_RATING")))]),t._v(" "),a("div",{staticClass:"rating-holder"},[a("ratingStars",{attrs:{rating:t.adminsData.product_review_log.prl_preview_rating}})],1)]),t._v(" "),a("p",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_PRODUCT_REVIEW_TITLE")))]),t._v("   "+t._s(t.adminsData.product_review_log.prl_preview_title))]),t._v(" "),a("p",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_DESCRIPTION")))]),t._v(" "+t._s(t.adminsData.product_review_log.prl_preview_description))])]):t._e(),t._v(" "),null!=t.adminsData.product_review_log&&t.adminsData.product_review_log.attached_files.length>0?a("div",{staticClass:"media-group my-5"},[t._l(t.adminsData.product_review_log.attached_files.slice(0,3),(function(e,s){return a("a",{key:s,staticClass:"media media--circle",attrs:{href:"javascript:;"},on:{click:function(a){return t.openEditedReviewGallery(s)}}},[a("img",{attrs:{src:"yokart/image/"+e.afile_id+"/small?t="+t.$timestamp(e.afile_updated_at),alt:"image"}})])})),t._v(" "),t.adminsData.product_review_log.attached_files.length>3?a("a",{staticClass:"media media--circle",attrs:{href:"javascript:;","data-toggle":"tooltip","data-skin":"brand","data-placement":"top",title:"","data-original-title":""},on:{click:function(a){return t.openEditedReviewGallery(3)}}},[a("span",[t._v(t._s(t.adminsData.product_review_log.attached_files.length-3)+"+")])]):t._e(),t._v(" "),a("LightBox",{ref:"lightbox2",attrs:{media:t.media2,showLightBox:!1}})],2):t._e(),t._v(" "),t.adminsData.preview_approved_at?a("div",{staticClass:"bg-light"},[a("div",{staticClass:"list-text"},[a("span",{staticClass:"lable"},[t._v(t._s(t.$t("LBL_PUBLISHED_DATE")))]),t._v(" "),a("p",[t._v(t._s(t._f("formatDate")(t.adminsData.preview_approved_at)))])])]):t._e(),t._v(" "),a("div",{staticClass:"form form-reply"},[null==t.adminsData.reply?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("LBL_REVIEW_REPLY")))]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-10"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reply,expression:"reply"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{rows:"5",cols:"15",name:"reply","data-vv-as":t.$t("LBL_REVIEW_REPLY"),"data-vv-validate-on":"none"},domProps:{value:t.reply},on:{input:function(a){a.target.composing||(t.reply=a.target.value)}}}),t._v(" "),t.errors.first("reply")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("reply")))]):t._e()]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("button",{staticClass:"btn btn-wide btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"submit",value:"Submit",disabled:!t.isComplete||1==t.clicked},on:{click:function(a){return t.submitReply(t.adminsData.preview_id)}}},[a("i",{staticClass:"fab fa-telegram-plane"})])])])]):t._e()]),t._v(" "),null!=t.adminsData.product_review_log?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v(t._s(t.$t("LBL_CHANGE_REVIEW_STATUS")))]),t._v(" "),a("div",{staticClass:"col-lg-9"},[a("div",{staticClass:"radio-inline"},[a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.product_review_log.prl_preview_status,expression:"adminsData.product_review_log.prl_preview_status"}],attrs:{type:"radio",checked:"checked",name:"preview_status"},domProps:{value:1,checked:t._q(t.adminsData.product_review_log.prl_preview_status,1)},on:{click:function(a){return t.updateEditedReviewStatus(1,t.adminsData.product_review_log.prl_id)},change:function(a){return t.$set(t.adminsData.product_review_log,"prl_preview_status",1)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_PENDING"))),a("span")]),t._v(" "),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.product_review_log.prl_preview_status,expression:"adminsData.product_review_log.prl_preview_status"}],attrs:{type:"radio",name:"preview_status"},domProps:{value:2,checked:t._q(t.adminsData.product_review_log.prl_preview_status,2)},on:{click:function(a){return t.updateEditedReviewStatus(2,t.adminsData.product_review_log.prl_id)},change:function(a){return t.$set(t.adminsData.product_review_log,"prl_preview_status",2)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_APPROVED"))),a("span")]),t._v(" "),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.product_review_log.prl_preview_status,expression:"adminsData.product_review_log.prl_preview_status"}],attrs:{type:"radio",name:"preview_status"},domProps:{value:3,checked:t._q(t.adminsData.product_review_log.prl_preview_status,3)},on:{click:function(a){return t.updateEditedReviewStatus(3,t.adminsData.product_review_log.prl_id)},change:function(a){return t.$set(t.adminsData.product_review_log,"prl_preview_status",3)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_REJECTED"))),a("span")])])])]):null==t.adminsData.product_review_log&&1==t.adminsData.preview_status?a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-lg-3 col-form-label"},[t._v(t._s(t.$t("LBL_CHANGE_REVIEW_STATUS")))]),t._v(" "),a("div",{staticClass:"col-lg-9"},[a("div",{staticClass:"radio-inline"},[a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.preview_status,expression:"adminsData.preview_status"}],attrs:{type:"radio",checked:"checked",name:"preview_status"},domProps:{value:1,checked:t._q(t.adminsData.preview_status,1)},on:{click:function(a){return t.updateReviewStatus(1,t.adminsData.preview_id)},change:function(a){return t.$set(t.adminsData,"preview_status",1)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_PENDING"))),a("span")]),t._v(" "),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.preview_status,expression:"adminsData.preview_status"}],attrs:{type:"radio",name:"preview_status"},domProps:{value:2,checked:t._q(t.adminsData.preview_status,2)},on:{click:function(a){return t.updateReviewStatus(2,t.adminsData.preview_id)},change:function(a){return t.$set(t.adminsData,"preview_status",2)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_APPROVED"))),a("span")]),t._v(" "),a("label",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.preview_status,expression:"adminsData.preview_status"}],attrs:{type:"radio",name:"preview_status"},domProps:{value:3,checked:t._q(t.adminsData.preview_status,3)},on:{click:function(a){return t.updateReviewStatus(3,t.adminsData.preview_id)},change:function(a){return t.$set(t.adminsData,"preview_status",3)}}}),t._v(" "+t._s(t.$t("LBL_REVIEW_REJECTED"))),a("span")])])])]):t._e()])])])])])])])])}),[],!1,null,null,null);a.default=r.exports},wDEh:function(t,a,e){"use strict";(function(t,s){var i=e("yvkt"),r=e("HAkG"),l=e.n(r);e("biUO");function d(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,a){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=e){var s,i,r,l,d=[],n=!0,_=!1;try{if(r=(e=e.call(t)).next,0===a){if(Object(e)!==e)return;n=!1}else for(;!(n=(s=r.call(e)).done)&&(d.push(s.value),d.length!==a);n=!0);}catch(t){_=!0,i=t}finally{try{if(!n&&null!=e.return&&(l=e.return(),Object(l)!==l))return}finally{if(_)throw i}}return d}}(t,a)||function(t,a){if(!t)return;if("string"==typeof t)return n(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return n(t,a)}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,s=new Array(a);e<a;e++)s[e]=t[e];return s}t.use(i.a),a.a={components:{LightBox:l.a},data:function(){return{baseUrl:baseUrl,adminsData:{prod_name:"",reply:"",attached_files:[]},media:[],media2:[],reply:"",clicked:0}},computed:{isComplete:function(){return this.reply}},methods:{pageLoadData:function(){var t=this;this.$http.get(adminBaseUrl+"/product-reviews/detail/"+this.$route.params.id).then((function(a){t.adminsData=a.data.data;for(var e=0,s=Object.entries(t.adminsData.attached_files);e<s.length;e++){var i=d(s[e],2),r=(i[0],i[1]);t.media.push({src:"yokart/image/"+r.afile_id+"/original?t="+$timestamp(r.afile_updated_at),thumb:"yokart/image/"+r.afile_id+"/small?t="+$timestamp(r.afile_updated_at)})}if(null!=t.adminsData.product_review_log)for(var l=0,n=Object.entries(t.adminsData.product_review_log.attached_files);l<n.length;l++){var _=d(n[l],2),o=(_[0],_[1]);t.media2.push({src:"yokart/image/"+o.afile_id+"/original?t="+$timestamp(o.afile_updated_at),thumb:"yokart/image/"+o.afile_id+"/small?t="+$timestamp(o.afile_updated_at)})}}))},openGallery:function(t){this.$refs.lightbox.showImage(t)},openEditedReviewGallery:function(t){this.$refs.lightbox2.showImage(t)},submitReply:function(t){var a=this;this.$validator.validateAll().then((function(e){if(e){a.clicked=1;var i=a.$serializeData({id:t,reply:a.reply});a.$http.post(adminBaseUrl+"/product-reviews/reply",i).then((function(t){0!=t.data.status?(a.clicked=0,a.pageLoadData()):s.error(t.data.message,"",s.options)}),(function(t){a.clicked=0,a.validateErrors(t)}))}else a.clicked=0}))},updateReviewStatus:function(t,a){var e=this.$serializeData({id:a,status:t});this.$http.post(adminBaseUrl+"/product-reviews/moderate",e).then((function(t){0!=t.data.status?s.success(t.data.message,"",s.options):s.error(t.data.message,"",s.options)}))},updateEditedReviewStatus:function(t,a){var e=this,i=this.$serializeData({id:a,status:t});this.$http.post(adminBaseUrl+"/product-reviews/moderate-edited",i).then((function(t){0!=t.data.status?(e.pageLoadData(),s.success(t.data.message,"",s.options)):s.error(t.data.message,"",s.options)}))},validateErrors:function(t){var a=this,e=t.data;Object.keys(e.errors).forEach((function(t){a.errors.add({field:t,msg:e.errors[t][0]})}))}},mounted:function(){this.pageLoadData()}}}).call(this,e("XuX8"),e("hUol"))}}]);