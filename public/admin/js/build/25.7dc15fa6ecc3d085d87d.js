(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{ByMQ:function(t,e,s){"use strict";(function(t){var a=s("ZRbu"),r=s("VbqC");e.a={components:{sendMail:a.a,exportPopup:r.a},data:function(){return{adminBaseUrl:adminBaseUrl,activeThemeUrl:activeThemeUrl,records:[],search:"",modalId:"deleteModel",pagination:[],loading:!1,loadingRightPanel:!1,recordId:"",emailCheck:0,pageLoaded:0,showEmpty:1,userGroups:[]}},methods:{refreshedSearchData:function(){this.$route.query.s&&(this.search=this.$route.query.s),this.pageRecords(1,!0)},searchRecords:function(){this.pageRecords(this.pagination.current_page)},currentPage:function(t){this.pageRecords(t)},pageRecords:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=s;var a=this.$serializeData({search:this.search});void 0!==this.pagination.per_page&&a.append("per_page",this.pagination.per_page),this.$http.post(adminBaseUrl+"/users/list?page="+t,a).then((function(t){e.records=t.data.data.records.data,e.pagination=t.data.data.records,e.emailCheck=t.data.data.emailCheck,e.loading=!1,e.showEmpty=t.data.data.showEmpty,e.pageLoaded=1,e.userGroups=t.data.data.groups}))},onSwitchStatus:function(e,s){var a=this.$serializeData({status:e.target.checked});this.$http.post(adminBaseUrl+"/users/status/"+s,a).then((function(e){0!=e.data.status?t.success(e.data.message,"",t.options):t.error(e.data.message,"",t.options)}))},deleteRecord:function(e){var s=this;this.$http.delete(adminBaseUrl+"/users/"+e).then((function(e){0!=e.data.status?(s.pageRecords(s.pagination.current_page),s.$bvModal.hide(s.modalId),t.success(e.data.message,"",t.options)):t.error(e.data.message,"",t.options)}))},openSendEmail:function(t){this.recordId=t,this.$bvModal.show("send_mail")},confirmDelete:function(t,e){t.stopPropagation(),this.recordId=e,this.$bvModal.show(this.modalId)},userExport:function(){this.$bvModal.show("exportDetailPopup")},checkUserVerification:function(t){return null!=t.user_email&&1==t.user_email_verified||null!=t.user_phone&&1==t.user_phone_verified},checkFailedVerification:function(t){return null!=t.user_email&&0==t.user_email_verified?"email":null!=t.user_phone&&0==t.user_phone_verified?"phone":void 0},validateErrors:function(t){var e=this,s=t.data;Object.keys(s.errors).forEach((function(t){e.errors.add({field:t,msg:s.errors[t][0]})}))},exportUsersXls:function(){window.open(adminBaseUrl+"/users/export-users?search="+this.search)}},mounted:function(){this.search="",this.refreshedSearchData()}}}).call(this,s("hUol"))},DU90:function(t,e,s){"use strict";(function(t){e.a={props:["recordId"],data:function(){return{clicked:0,emailData:[]}},methods:{sendEmail:function(e){var s=this;this.$validator.validateAll().then((function(a){if(a){s.clicked=1;var r=s.$serializeData(s.emailData);s.$http.post(adminBaseUrl+"/users/sendmail/"+e,r).then((function(e){if(0==e.data.status)return s.clicked=0,void t.error(e.data.message,"",t.options);s.clicked=0,s.$bvModal.hide("send_mail"),s.emailData=[],t.success(e.data.message,"",t.options)}))}else s.clicked=0}))}}}}).call(this,s("hUol"))},L7X4:function(t,e,s){"use strict";s.r(e);var a=s("ByMQ").a,r=s("KHd+"),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"subheader",attrs:{id:"subheader"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"subheader__main"},[e("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_USERS")))]),t._v(" "),e("div",{staticClass:"subheader__breadcrumbs"},[e("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[e("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_USERS")))])],1)]),t._v(" "),t.$canWrite("USERS")?e("div",{staticClass:"subheader__toolbar"},[e("button",{staticClass:"btn btn-white",attrs:{href:"javascript:void(0);",disabled:0==t.records.length},on:{click:function(e){return t.userExport()}}},[e("i",{staticClass:"fas fa-download"}),t._v("\n          "+t._s(t.$t("BTN_EXPORT"))+"\n        ")])]):t._e()])]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12"},[e("div",{staticClass:"portlet portlet--height-fluid"},[e("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-icon input-icon--left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("PLH_SEARCH")+"...",id:"generalSearch",readonly:0==t.records.length&&""===t.search},domProps:{value:t.search},on:{keyup:t.searchRecords,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),""!=t.search?e("span",{staticClass:"input-icon__icon input-icon__icon--right",on:{click:function(e){t.search="",t.pageRecords(1)}}},[t._m(1)]):t._e()])])])])]),t._v(" "),e("hr",{staticClass:"m-0"}),t._v(" "),e("div",{staticClass:"portlet__body portlet__body--fit"},[e("div",{staticClass:"section"},[e("div",{staticClass:"section__content"},[e("table",{staticClass:"table table-data table-justified"},[e("thead",[e("tr",[e("th",[t._v(t._s("#"))]),t._v(" "),e("th",[t._v(t._s(t.$t("LBL_USER_NAME")))]),t._v(" "),e("th",[t._v(t._s(t.$t("LBL_EMAIL")))]),t._v(" "),e("th",[t._v(t._s(t.$t("LBL_PHONE")))]),t._v(" "),e("th",[t._v(t._s(t.$t("LBL_PUBLISH")))]),t._v(" "),e("th")])]),t._v(" "),0==t.loading&&0==t.records.length&&""==t.search&&1==t.showEmpty&&1==t.pageLoaded?e("tbody",[e("tr",[e("td",{attrs:{colspan:"7"}},[e("div",{staticClass:"no-data-found"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:t.activeThemeUrl+"/media/retina/empty/no-messages.svg",width:"125px",height:"125px"}})]),t._v(" "),e("div",{staticClass:"data"},[e("h3",[t._v(t._s(t.$t("LBL_NO_USERS_TO_SHOW")))])])])])])]):0==t.loading&&0==t.records.length&&""!=t.search&&0==t.showEmpty&&1==t.pageLoaded?e("tbody",[e("tr",[e("td",{attrs:{colspan:"7"}},[e("noRecordsFound")],1)])]):e("tbody",t._l(t.records,(function(s,a){return e("tr",{key:"listing"+a},[e("td",{attrs:{scope:"row"}},[t._v(t._s(t.pagination.from+a))]),t._v(" "),e("td",[e("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("TTL_VIEW_USER"),to:{name:"userDetails",params:{id:s.user_id}}}},[t._v(t._s(s.user_name))])],1),t._v(" "),e("td",[e("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{title:t.$t("TTL_VIEW_USER"),to:{name:"userDetails",params:{id:s.user_id}}}},[t._v(t._s(s.user_email))])],1),t._v(" "),e("td",[t._v("\n                        "+t._s(null!=s.user_phone&&""!=s.user_phone&&null!=s.country_phonecode?"+"+s.country_phonecode+" "+s.user_phone:"")+"\n                      ")]),t._v(" "),e("td",[e("span",{staticClass:"d-flex align-items-center"},[e("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"switch switch--sm m-0",class:[0==t.checkUserVerification(s)||1==s.user_gdpr_approved?"disabledbutton":""],attrs:{title:1==s.user_publish?t.$t("TTL_UNPUBLISH"):t.$t("TTL_PUBLISH")}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.user_publish,expression:"record.user_publish"}],attrs:{type:"checkbox",disabled:!t.$canWrite("USERS")},domProps:{checked:Array.isArray(s.user_publish)?t._i(s.user_publish,null)>-1:s.user_publish},on:{change:[function(e){var a=s.user_publish,r=e.target,i=!!r.checked;if(Array.isArray(a)){var o=t._i(a,null);r.checked?o<0&&t.$set(s,"user_publish",a.concat([null])):o>-1&&t.$set(s,"user_publish",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(s,"user_publish",i)},function(e){return t.onSwitchStatus(e,s.user_id)}]}}),t._v(" "),e("span")]),t._v(" "),"1"==t.emailCheck&&0==t.checkUserVerification(s)?e("i",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"fas fa-info-circle",attrs:{"data-container":"body",title:"email"==t.checkFailedVerification(s)?t.$t("TTL_USER_NOT_VERIFIED"):t.$t("TTL_USER_PHONE_NOT_VERIFIED")}}):t._e()])]),t._v(" "),e("td",[e("div",{staticClass:"actions"},[""!=s.user_email?e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[t.$canWrite("USERS")?"":"disabled no-drop",1==s.user_gdpr_approved?"disabledbutton":""],attrs:{href:"javascript:;",title:t.$t("TTL_SEND_EMAIL")},on:{click:function(e){1!=s.user_gdpr_approved&&t.openSendEmail(s.user_id)}}},[e("svg",[e("use",{attrs:{"xlink:href":t.adminBaseUrl+"/images/retina/sprite.svg#email-icon",href:t.adminBaseUrl+"/images/retina/sprite.svg#email-icon"}})])]):t._e(),t._v(" "),e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[1==s.user_gdpr_approved?"disabledbutton":"",t.$canWrite("USERS")?"":"disabled no-drop"],attrs:{href:t.adminBaseUrl+"/users/login/"+s.user_id,target:"_blank",title:t.$t("TTL_IMPERSONATE_USER")}},[e("svg",[e("use",{attrs:{"xlink:href":t.adminBaseUrl+"/images/retina/sprite.svg#impersonate-icon",href:t.adminBaseUrl+"/images/retina/sprite.svg#impersonate-icon"}})])]),t._v(" "),e("router-link",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[t.$canWrite("USERS")?"":"disabled no-drop"],attrs:{title:t.$t("TTL_EDIT"),to:{name:"userDetails",params:{id:s.user_id}}}},[e("svg",[e("use",{attrs:{"xlink:href":t.adminBaseUrl+"/images/retina/sprite.svg#edit-icon",href:t.adminBaseUrl+"/images/retina/sprite.svg#edit-icon"}})])]),t._v(" "),e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[t.$canWrite("USERS")?"":"disabled no-drop"],attrs:{href:"javascript:;",title:t.$t("TTL_DELETE")},on:{click:function(e){return t.confirmDelete(e,s.user_id)}}},[e("svg",[e("use",{attrs:{"xlink:href":t.adminBaseUrl+"/images/retina/sprite.svg#delete-icon",href:t.adminBaseUrl+"/images/retina/sprite.svg#delete-icon"}})])])],1)])])})),0)])])])]),t._v(" "),t.loading?e("loader"):t._e(),t._v(" "),t.records.length>0?e("div",{staticClass:"portlet__foot"},[e("pagination",{attrs:{pagination:t.pagination},on:{currentPage:t.currentPage}})],1):t._e(),t._v(" "),e("DeleteModel",{attrs:{deletePopText:t.$t("LBL_USER_DELETE_CONFIRMATION"),recordId:t.recordId},on:{deleted:function(e){return t.deleteRecord(t.recordId)}}}),t._v(" "),e("exportPopup",{attrs:{groups:t.userGroups}})],1),t._v(" "),e("sendMail",{attrs:{recordId:t.recordId}})],1)])])])}),[function(){var t=this._self._c;return t("span",{staticClass:"input-icon__icon input-icon__icon--left"},[t("span",[t("i",{staticClass:"la la-search"})])])},function(){var t=this._self._c;return t("span",[t("i",{staticClass:"fas fa-times"})])}],!1,null,null,null);e.default=i.exports},VbqC:function(t,e,s){"use strict";var a=s("bDC8").a,r=s("KHd+"),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"exportDetailPopup",centered:"",title:"BootstrapVue"},on:{hidden:t.closeModal},scopedSlots:t._u([{key:"modal-header",fn:function(s){var a=s.close;return[e("h5",{staticClass:"modal-title"},[e("span"),t._v("\n            "+t._s(t.$t("LBL_USERS_EXPORT"))+"\n        ")]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(t){return a()}}})]}},{key:"modal-footer",fn:function(){return[e("button",{staticClass:"btn btn-brand mx-auto",attrs:{type:"button"},on:{click:t.exportData}},[t._v(t._s(t.$t("BTN_EXPORT")))])]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"export-wrapper"},[e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-5 col-form-label"},[t._v(t._s(t.$t("LBL_SIGNUP_DATE")))]),t._v(" "),e("div",{staticClass:"col-md-7"},[e("date-picker",{staticClass:"w-100",attrs:{type:"date",range:"","value-type":"format",format:"YYYY-MM-DD",placeholder:t.$t("PLH_SELECT_DATE"),"input-class":"form-control","disabled-date":function(t){return t>=new Date}},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1)]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-5 col-form-label"},[t._v(t._s(t.$t("LBL_USER_STATUS")))]),t._v(" "),e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-default btn-block dropdown-toggle",attrs:{type:"button",id:"dropdownUserStatus","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},model:{value:t.user_status,callback:function(e){t.user_status=e},expression:"user_status"}},[t._v(t._s(""==t.user_status?t.$t("BTN_ALL"):t.user_status))]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownUserStatus"}},[e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){t.user_status="Active"}}},[t._v(t._s(t.$t("LBL_USER_ACTIVE")))]),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){t.user_status="InActive"}}},[t._v(t._s(t.$t("LBL_USER_INACTIVE")))])])])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-5 col-form-label"},[t._v(t._s(t.$t("LBL_PHONE_EMAIL_VERIFIED")))]),t._v(" "),e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-default btn-block dropdown-toggle",attrs:{type:"button",id:"dropdownUserVerified","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},model:{value:t.user_verified,callback:function(e){t.user_verified=e},expression:"user_verified"}},[t._v(t._s(""==t.user_verified?t.$t("BTN_ALL"):t.user_verified))]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownUserVerifiedStatus"}},[e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){t.user_verified="Yes"}}},[t._v(t._s(t.$t("LBL_YES")))]),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){t.user_verified="No"}}},[t._v(t._s(t.$t("LBL_NO")))])])])])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-md-5 col-form-label"},[t._v(t._s(t.$t("LBL_GROUPS")))]),t._v(" "),e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-default btn-block dropdown-toggle",attrs:{type:"button",id:"dropdownUserGroup","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},model:{value:t.user_group,callback:function(e){t.user_group=e},expression:"user_group"}},[t._v(t._s(""==t.user_group?t.$t("BTN_ALL"):t.user_group))]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownUserVerifiedStatus"}},t._l(t.groups,(function(s){return e("a",{key:s.ugroup_id,staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){t.user_group=s.ugroup_name}}},[t._v("\n                            "+t._s(s.ugroup_name)+"\n                        ")])})),0)])])])])])}),[],!1,null,null,null);e.a=i.exports},ZRbu:function(t,e,s){"use strict";var a=s("DU90").a,r=s("KHd+"),i=Object(r.a)(a,(function(){var t=this,e=t._self._c;return e("b-modal",{attrs:{id:"send_mail",centered:"",title:"BootstrapVue"},scopedSlots:t._u([{key:"modal-header",fn:function(s){s.close;return[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.$t("LBL_COMPOSE_MAIL")))]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(e){return t.$bvModal.hide("send_mail")}}})]}},{key:"modal-footer",fn:function(){return[e("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary sendMailBtn",class:1==t.clicked&&"gb-is-loading",attrs:{type:"button","data-dismiss":"modal",disabled:1==t.clicked},on:{click:function(e){return t.sendEmail(t.recordId)}}},[t._v(t._s(t.$t("BTN_COMPOSE_MAIL_SEND")))])]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-xl-3 col-lg-3 col-form-label"},[t._v(t._s(t.$t("LBL_COMPOSE_MAIL_SUBJECT"))+"  "),e("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),e("div",{staticClass:"col-lg-9 col-xl-9"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.emailData.subject,expression:"emailData.subject"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"subject","data-vv-as":t.$t("LBL_COMPOSE_MAIL_SUBJECT"),"data-vv-validate-on":"none"},domProps:{value:t.emailData.subject},on:{input:function(e){e.target.composing||t.$set(t.emailData,"subject",e.target.value)}}}),t._v(" "),t.errors.first("subject")?e("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("subject")))]):t._e()])]),t._v(" "),e("div",{staticClass:"form-group row"},[e("label",{staticClass:"col-xl-3 col-lg-3 col-form-label"},[t._v(t._s(t.$t("LBL_COMPOSE_MAIL_MESSAGE"))+"  "),e("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),e("div",{staticClass:"col-lg-9 col-xl-9"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.emailData.message,expression:"emailData.message"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{rows:"5",name:"message","data-vv-as":t.$t("LBL_COMPOSE_MAIL_MESSAGE"),"data-vv-validate-on":"none"},domProps:{value:t.emailData.message},on:{input:function(e){e.target.composing||t.$set(t.emailData,"message",e.target.value)}}}),t._v(" "),t.errors.first("message")?e("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("message")))]):t._e()])])])}),[],!1,null,null,null);e.a=i.exports},bDC8:function(t,e,s){"use strict";(function(t){s("7EX9"),s("QRy/");e.a={data:function(){return{dateRange:[],user_status:"All",user_verified:"All",user_group:"All"}},props:["groups"],methods:{exportData:function(){var e=this,s=this.$serializeData({date:this.dateRange,userStatus:this.user_status,userVerified:this.user_verified,user_group:this.user_group});this.$http.post(adminBaseUrl+"/users/export-users",s).then((function(s){0!=s.data.status?(t.success(s.data.message,"",t.options),e.$bvModal.hide("exportDetailPopup"),window.open(s.data.data,"_blank")):t.error(s.data.message,"",t.options)}))},closeModal:function(){},exportInvoice:function(){}}}}).call(this,s("hUol"))}}]);