(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{"6uuK":function(t,a,e){"use strict";(function(t,s){e("dycs");var i=e("lN2g"),r=e("yhet"),n=e.n(r);e("VCwm");function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var c={bpcat_id:"",bpcat_name:""},d={search:""};a.a={components:{Tree:i.c.mixPlugins([i.b,i.a]),Treeselect:n.a},data:function(){return{records:[],baseUrl:baseUrl,adminsData:c,selectedPage:"",categories:[],formTitle:"",modelId:"deleteModel",recordId:"",source_id:"",destination_id:0,position:"",clicked:0,loading:!1,noDataFound:!1,searchData:d,createdByUser:"",updatedByUser:"",updatedAt:"",createdAt:"",pageLoaded:0,showEmpty:1,editText:""}},watch:{$route:"refreshedSearchData"},computed:{isComplete:function(){var t=0===this.adminsData.bpcat_parent?"not empty":this.adminsData.bpcat_parent;return this.adminsData.bpcat_name&&t}},methods:{refreshedSearchData:function(){this.$route.query.s&&(this.searchData.search=this.$route.query.s),this.pageRecords(!0)},pageRecords:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=e,this.noDataFound=!1,this.$http.post(adminBaseUrl+"/blog/categories/list").then((function(e){var s=e.data.data.listing;s=a.recursiveMap(s),a.records=s,0==a.records.length&&(a.noDataFound=!0,t(".YK-catListing").hide()),a.loading=!1,Object(i.d)(a.records),a.showEmpty=e.data.data.showEmpty,t(".YK-catListing").show(),a.pageLoaded=1})),this.getParentCategories("")},onDragStart:function(t,a){app.source_id=a.dragNode.bpcat_id},drop:function(t){var a=this,e=t.targetTree.getNodeParentByPath(t.targetPath);1==t.targetPath.length?app.destination_id=0:app.destination_id=e.bpcat_id,setTimeout((function(){void 0===e?app.position=t.targetPath[0]:e.children.forEach((function(t,a){t.bpcat_id==app.source_id&&(app.position=a)})),a.updateDragListing()}),200)},updateDragListing:function(){var t=this,a={};a.source_id=app.source_id,a.destination_id=app.destination_id,a.position=app.position;var e=this.$serializeData(a);this.$http.post(adminBaseUrl+"/blog/categories/drag",e).then((function(t){0!=t.data.status?s.success(t.data.message,"",s.options):s.error(t.data.message,"",s.options)}),(function(a){t.validateErrors(a)}))},search:function(){var a=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="";r=s?s.trim().toLowerCase():e.target.value.trim().toLowerCase()||"",""!=this.searchData.search?Object(i.e)(this.records):Object(i.d)(this.records);var n=this;Object(i.f)(this.records,(function(t){n.$set(t,"$hidden",!t.bpcat_full_name.toLowerCase().includes(r))})),setTimeout((function(){t("div.tree-branch.he-tree--hidden").length==a.records.length?(a.noDataFound=!0,t(".YK-catListing").hide()):(a.noDataFound=!1,t(".YK-catListing").show())}),50)},recursiveMap:function(t){var a=this;return t.map((function(t){if(t.children.length>0){a.recursiveMap(t.children),t.bpcat_full_name=t.bpcat_name;for(var e=0;e<t.children.length;e++)t.bpcat_full_name+=t.children[e].bpcat_full_name?t.children[e].bpcat_full_name:t.children[e].bpcat_name}else t.bpcat_full_name=t.bpcat_name;return t.bpcat_full_name="object"==o(t.bpcat_full_name)?t.bpcat_full_name.bpcat_name:t.bpcat_full_name,t}))},getParentCategories:function(t){var a=this;this.categories=[],this.$http.get(adminBaseUrl+"/blog/categories/parent/"+t).then((function(t){a.categories=t.data.data}))},validateRecord:function(){var t=this;this.$validator.validateAll().then((function(a){if(a){var e=t.adminsData;t.clicked=1,""!=e.bpcat_id?t.updateRecord(e.bpcat_id,e):t.saveRecord(e)}else t.clicked=0}))},saveRecord:function(t){var a=this,e=this.$serializeData(t);this.$http.post(adminBaseUrl+"/blog/categories",e).then((function(t){a.clicked=0,0!=t.data.status?(s.success(t.data.message,"",s.options),a.pageRecords(),a.selectedPage="",a.noDataFound=!1,a.searchData.search="",a.emptyFormValues()):s.error(t.data.message,"",s.options)}),(function(t){a.clicked=0,a.validateErrors(t)}))},updateRecord:function(t,a){var e=this,i=this.$serializeData(a);i.append("_method","put"),this.$http.post(adminBaseUrl+"/blog/categories/"+t,i).then((function(t){e.clicked=0,0!=t.data.status?(s.success(t.data.message,"",s.options),e.pageRecords(),e.selectedPage="",e.noDataFound=!1,e.searchData.search="",e.emptyFormValues()):s.error(t.data.message,"",s.options)}),(function(t){e.clicked=0,e.validateErrors(t)}))},validateErrors:function(t){var a=this,e=t.data;Object.keys(e.errors).forEach((function(t){a.errors.add({field:t,msg:e.errors[t][0]})}))},emptyFormValues:function(){this.adminsData={bpcat_id:"",bpcat_name:""},this.errors.clear()},deleteRecord:function(t){var a=this;this.$http.delete(adminBaseUrl+"/blog/categories/"+t).then((function(t){0!=t.data.status?(s.success(t.data.message,"",s.options),a.pageRecords(),a.$bvModal.hide(a.modelId)):s.error(t.data.message,"",s.options)}))},openEditPage:function(t){this.emptyUpdatedFieldValue(),this.emptyFormValues(),this.getParentCategories(t.bpcat_id),this.adminsData=t,this.selectedPage="editform",this.editText=t.bpcat_name,null!=t.created_at&&"admin_username"in t.created_at&&(this.createdByUser=t.created_at.admin_username),null!=t.updated_at&&"admin_username"in t.updated_at&&(this.updatedByUser=t.updated_at.admin_username),this.updatedAt=t.bpcat_updated_at?t.bpcat_updated_at:"",this.createdAt=t.bpcat_created_at?t.bpcat_created_at:""},openAddPage:function(){this.emptyFormValues(),this.adminsData.bpcat_parent=0,""!=this.searchData.search&&(this.searchData.search="",this.pageRecords()),this.selectedPage="addform",this.showEmpty=0},confirmDelete:function(t,a){t.stopPropagation(),this.recordId=a,this.$bvModal.show(this.modelId)},cancel:function(){this.selectedPage=!1,0==this.records.length&&(this.showEmpty=1)},onSwitchStatus:function(t,a){var e=this.$serializeData({status:t.target.checked});this.$http.post(adminBaseUrl+"/blog/categories/status/"+a,e).then((function(t){s.success(t.data.message,"",s.options)}))},emptyUpdatedFieldValue:function(){this.createdByUser="",this.updatedByUser="",this.updatedAt="",this.createdAt=""}},mounted:function(){this.searchData.search="",this.refreshedSearchData()}}}).call(this,e("EVdn"),e("hUol"))},AWSF:function(t,a,e){"use strict";e("V0Sl")},N8Pi:function(t,a,e){"use strict";e.r(a);var s=e("6uuK").a,i=(e("AWSF"),e("KHd+")),r=Object(i.a)(s,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"subheader",attrs:{id:"subheader"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"subheader__main"},[a("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_BLOG_CATEGORIES")))]),t._v(" "),a("div",{staticClass:"subheader__breadcrumbs"},[a("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[a("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_CMS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_BLOGS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_BLOG_CATEGORIES")))])],1)]),t._v(" "),a("div",{staticClass:"subheader__toolbar"},[a("a",{staticClass:"btn btn-white",class:[t.$canWrite("BLOGS")?"":"disabledbutton no-drop"],attrs:{href:"javascript:void(0);"},on:{click:t.openAddPage}},[a("i",{staticClass:"fas fa-plus"}),t._v("\n          "+t._s(t.$t("BTN_ADD"))+"\n        ")])])])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{attrs:{id:"manage-blogCategory"}},[a("div",{staticClass:"row"},[a("div",{class:[1==t.showEmpty?"col-md-12":"col-md-6"]},[a("div",{staticClass:"portlet portlet--height-fluid"},[0==t.showEmpty?a("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-icon input-icon--left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.search,expression:"searchData.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("PLH_SEARCH"),id:"generalSearch"},domProps:{value:t.searchData.search},on:{keyup:function(a){return t.search(a)},input:function(a){a.target.composing||t.$set(t.searchData,"search",a.target.value)}}}),t._v(" "),t._m(0),t._v(" "),""!=t.searchData.search?a("span",{staticClass:"input-icon__icon input-icon__icon--right",on:{click:function(a){t.searchData.search="",t.pageRecords()}}},[t._m(1)]):t._e()])])]):t._e(),t._v(" "),a("hr",{staticClass:"m-0"}),t._v(" "),t.records.length>0&&0==t.showEmpty&&1==t.pageLoaded?a("div",{staticClass:"portlet__body YK-catListing"},[a("div",{staticClass:"list-categories"},[[a("Tree",{ref:"tree",attrs:{value:t.records,ondragstart:t.onDragStart},on:{drop:t.drop},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.node,i=(e.index,e.path),r=e.tree;return a("div",{staticClass:"outerDiv",attrs:{"data-id":s.bpcat_id}},[a("div",{staticClass:"categories__label"},[a("div",{},[a("i",{staticClass:"fa fa-arrows-alt handle m-2"}),t._v(" "),s.children.length?a("i",{staticClass:"fa m-2",class:s.$folded?"fa-angle-right":"fa-angle-down",on:{click:function(t){return t.stopPropagation(),r.toggleFold(s,i)}}}):t._e(),t._v(" "),t.$canWrite("BLOGS")?a("span",{staticClass:"category__txt",domProps:{innerHTML:t._s(t.$options.filters.highlight(s.bpcat_name,t.searchData.search))}}):a("span",{staticClass:"category__txt link",domProps:{innerHTML:t._s(t.$options.filters.highlight(s.bpcat_name,t.searchData.search))},on:{click:function(a){return a.stopPropagation(),t.openEditPage(s)}}}),t._v(" "),a("span",{staticClass:"badge badge--success"},[t._v(t._s(s.children.length))])]),t._v(" "),a("div",{staticClass:"actions"},[a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"switch switch--sm",attrs:{title:1==s.bpcat_publish?t.$t("TTL_UNPUBLISH"):t.$t("TTL_PUBLISH")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.bpcat_publish,expression:"node.bpcat_publish"}],attrs:{type:"checkbox",disabled:!t.$canWrite("BLOGS")},domProps:{checked:Array.isArray(s.bpcat_publish)?t._i(s.bpcat_publish,null)>-1:s.bpcat_publish},on:{click:function(t){t.stopPropagation()},change:[function(a){var e=s.bpcat_publish,i=a.target,r=!!i.checked;if(Array.isArray(e)){var n=t._i(e,null);i.checked?n<0&&t.$set(s,"bpcat_publish",e.concat([null])):n>-1&&t.$set(s,"bpcat_publish",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(s,"bpcat_publish",r)},function(a){t.onSwitchStatus(a,s.bpcat_id),t.selectedPage=""}]}}),t._v(" "),a("span")]),t._v(" "),a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",attrs:{type:"button",title:t.$t("TTL_EDIT"),disabled:!t.$canWrite("BLOGS")},on:{click:function(a){return a.stopPropagation(),t.openEditPage(s)}}},[a("svg",[a("use",{attrs:{"xlink:href":t.baseUrl+"/admin/images/retina/sprite.svg#edit-icon"}})])]),t._v(" Â \n                          "),a("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",attrs:{title:t.$t("TTL_DELETE"),type:"button",disabled:!t.$canWrite("BLOGS")},on:{click:function(a){return a.stopPropagation(),t.confirmDelete(a,s.bpcat_id)}}},[a("svg",[a("use",{attrs:{"xlink:href":t.baseUrl+"/admin/images/retina/sprite.svg#delete-icon"}})])])])])])}}],null,!1,4642275)})]],2)]):t._e(),t._v(" "),1==t.showEmpty&&1==t.pageLoaded?a("div",{staticClass:"portlet__body"},[a("div",{staticClass:"get-started"},[a("div",{staticClass:"get-started-arrow d-flex justify-content-end mb-5"},[a("img",{attrs:{src:t.baseUrl+"/admin/images/get-started-graphic/get-started-arrow-head.svg"}})]),t._v(" "),a("div",{staticClass:"no-content d-flex text-center flex-column mb-7"},[a("p",[t._v("\n                    "+t._s(t.$t("LBL_CLICK_THE"))+"\n                    "),a("a",{staticClass:"btn btn-brand btn-small",attrs:{href:"javascript:;"},on:{click:t.openAddPage}},[a("i",{staticClass:"fas fa-plus"}),t._v(" "+t._s(t.$t("BTN_ADD"))+"\n                    ")]),t._v(" "+t._s(t.$t("LBL_BUTTON_TO_CREATE_CATEGORIES"))+"\n                  ")])]),t._v(" "),a("div",{staticClass:"get-started-media"},[a("img",{attrs:{src:t.baseUrl+"/admin/images/get-started-graphic/get-started-blog-categories.svg"}})])])]):a("div",[t.loading?a("loader"):t._e(),t._v(" "),0==t.loading&&t.noDataFound&&t.records.length>0?a("noRecordsFound"):t._e()],1)])]),t._v(" "),0==t.showEmpty?a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"portlet portlet--height-fluid"},[t.selectedPage?a("div",{staticClass:"portlet__head"},[a("div",{staticClass:"portlet__head-label"},["editform"==t.selectedPage?a("h3",{staticClass:"portlet__head-title"},[t._v("\n                  "+t._s(t.$canWrite("BLOGS")?t.$t("LBL_EDITING")+" -":"")+"\n                  "),a("span",{staticClass:"editing-txt"},[t._v(t._s(t.editText))])]):t._e(),t._v(" "),"addform"==t.selectedPage?a("h3",{staticClass:"portlet__head-title"},[t._v(t._s(t.$t("LBL_NEW_CATEGORY_SETUP")))]):t._e()]),t._v(" "),"editform"==t.selectedPage?a("div",{staticClass:"portlet__head-toolbar"},[t._m(2),t._v(" "),a("b-popover",{staticClass:"popover-cover",attrs:{target:"tooltip-target-1",triggers:"hover",placement:"top"}},[a("div",{staticClass:"list-stats"},[a("div",{staticClass:"lable"},[a("span",{staticClass:"stats_title"},[t._v(t._s(t.$t("LBL_CREATED"))+":")]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t.createdByUser?t.createdByUser+" |":"")+" "+t._s(t._f("formatDateTime")(t.createdAt)))])]),t._v(" "),a("div",{staticClass:"lable"},[a("span",{staticClass:"stats_title"},[t._v(t._s(t.$t("LBL_LAST_UPDATED"))+":")]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t.updatedByUser?t.updatedByUser+" |":"")+" "+t._s(t._f("formatDateTime")(t.updatedAt)))])])])])],1):t._e()]):t._e(),t._v(" "),t.selectedPage?a("div",{staticClass:"portlet__body",class:[t.$canWrite("BLOGS")?"":"disabledbutton"]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("\n                      "+t._s(t.$t("LBL_BLOG_CATEGORY_NAME"))+"\n                      "),a("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),""!=t.adminsData.bpcat_id?a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.bpcat_id,expression:"adminsData.bpcat_id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.adminsData.bpcat_id},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"bpcat_id",a.target.value)}}}):t._e(),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.bpcat_name,expression:"adminsData.bpcat_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"bpcat_name","data-vv-as":t.$t("LBL_BLOG_CATEGORY_NAME"),"data-vv-validate-on":"none"},domProps:{value:t.adminsData.bpcat_name},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"bpcat_name",a.target.value)}}}),t._v(" "),t.errors.first("bpcat_name")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("bpcat_name")))]):t._e()])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("LBL_PARENT_CATEGORY")))]),t._v(" "),t.categories.length>0?a("treeselect",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{name:"bpcat_parent",defaultExpandLevel:1/0,options:t.categories,searchable:!0,"open-on-click":!0,"close-on-select":!0,"data-vv-as":t.$t("LBL_PARENT_CATEGORY"),"data-vv-validate-on":"none"},model:{value:t.adminsData.bpcat_parent,callback:function(a){t.$set(t.adminsData,"bpcat_parent",a)},expression:"adminsData.bpcat_parent"}}):t._e(),t._v(" "),t.errors.first("bpcat_parent")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("bpcat_parent")))]):t._e()],1)])])]):t._e(),t._v(" "),""==t.selectedPage?a("div",{staticClass:"portlet__body"},[a("div",{staticClass:"no-data-found"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:this.$noDataImage(),alt:""}})]),t._v(" "),a("div",{staticClass:"data"},[a("p",[t._v(t._s(t.$t("LBL_USE_ICONS_FOR_ADVANCED_ACTIONS")))])])])]):t._e(),t._v(" "),""!=t.selectedPage?a("div",{staticClass:"portlet__foot"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"reset"},on:{click:function(a){return t.cancel()}}},[t._v(t._s(t.$t("BTN_DISCARD")))])]),t._v(" "),a("div",{staticClass:"col-auto"},["addform"==t.selectedPage?a("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:!t.isComplete||1==t.clicked||!t.$canWrite("BLOGS")},on:{click:function(a){return t.validateRecord()}}},[t._v(t._s(t.$t("BTN_BLOG_CATEGORY_SAVE")))]):t._e(),t._v(" "),"editform"==t.selectedPage?a("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:!t.isComplete||1==t.clicked||!t.$canWrite("BLOGS")},on:{click:function(a){return t.validateRecord()}}},[t._v(t._s(t.$t("BTN_BLOG_CATEGORY_UPDATE")))]):t._e()])])]):t._e()])]):t._e(),t._v(" "),a("DeleteModel",{attrs:{deletePopText:t.$t("LBL_BLOG_CATEGORY_DELETE_TEXT"),subText:t.$t("LBL_BLOG_CATEGORY_DELETE_CAPTION"),recordId:t.recordId},on:{deleted:function(a){return t.deleteRecord(t.recordId)}}})],1)])])])}),[function(){var t=this._self._c;return t("span",{staticClass:"input-icon__icon input-icon__icon--left"},[t("span",[t("i",{staticClass:"la la-search"})])])},function(){var t=this._self._c;return t("span",[t("i",{staticClass:"fas fa-times"})])},function(){var t=this._self._c;return t("div",{staticClass:"portlet__head-actions",attrs:{id:"tooltip-target-1"}},[t("i",{staticClass:"fas fa-info-circle"})])}],!1,null,null,null);a.default=r.exports},V0Sl:function(t,a,e){var s=e("Zcy1");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};e("aET+")(s,i);s.locals&&(t.exports=s.locals)},Zcy1:function(t,a,e){(t.exports=e("I1BE")(!1)).push([t.i,"\n.he-tree .tree-node {\n  border: none !important;\n  padding: 0 !important;\n}\n",""])}}]);