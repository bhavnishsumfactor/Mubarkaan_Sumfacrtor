(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{AIyA:function(t,a,e){"use strict";e.r(a);var s=e("hlhj").a,i=e("KHd+"),r=Object(i.a)(s,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"subheader",attrs:{id:"subheader"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"subheader__main"},[a("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_EMAIL_TEMPLATES")))]),t._v(" "),a("div",{staticClass:"subheader__breadcrumbs"},[a("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[a("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_CMS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_EMAIL_TEMPLATES")))])],1)])])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-6"},[a("div",{staticClass:"portlet portlet--height-fluid"},[a("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"input-icon input-icon--left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchData.search,expression:"searchData.search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("PLH_SEARCH"),id:"generalSearch"},domProps:{value:t.searchData.search},on:{keyup:t.searchRecords,input:function(a){a.target.composing||t.$set(t.searchData,"search",a.target.value)}}}),t._v(" "),t._m(0),t._v(" "),""!=t.searchData.search?a("span",{staticClass:"input-icon__icon input-icon__icon--right",on:{click:function(a){t.searchData.search="",t.pageRecords(1)}}},[t._m(1)]):t._e()])])])])]),t._v(" "),a("hr",{staticClass:"m-0"}),t._v(" "),t.records.length>0?a("div",{staticClass:"portlet__body portlet__body--fit"},[a("div",{staticClass:"section"},[a("div",{staticClass:"section__content"},[a("table",{staticClass:"table table-data table-justified"},[a("thead",[a("tr",[a("th",[t._v("#")]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_EMAIL_TEMPLATE_NAME")))]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.records,(function(e,s){return a("tr",{key:e.etpl_id,attrs:{"data-id":e.etpl_id}},[a("td",{attrs:{scope:"row"}},[t._v(t._s(t.pagination.from+s))]),t._v(" "),a("td",[t.$canWrite("EMAIL_TEMPLATES")?a("div",[t._v(t._s(e.etpl_name))]):a("a",{attrs:{href:"javascript:;"},on:{click:function(a){return a.preventDefault(),t.editRecord(e)}}},[t._v(t._s(e.etpl_name))])]),t._v(" "),a("td",[a("div",{staticClass:"actions"},[a("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-sm btn-light btn-icon",class:[t.$canWrite("EMAIL_TEMPLATES")?"":"disabled no-drop"],attrs:{href:"javascript:;",title:t.$t("TTL_EDIT")},on:{click:function(a){return a.preventDefault(),t.editRecord(e)}}},[a("svg",[a("use",{attrs:{"xlink:href":t.baseUrl+"/admin/images/retina/sprite.svg#edit-icon"}})])])])])])})),0)])])])]):t._e(),t._v(" "),t.loading?a("loader"):t._e(),t._v(" "),0==t.loading&&0==t.records.length?a("noRecordsFound"):t._e(),t._v(" "),t.records.length>0?a("div",{staticClass:"portlet__foot"},[a("pagination",{attrs:{pagination:t.pagination},on:{currentPage:t.currentPage}})],1):t._e()],1)]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"portlet portlet--height-fluid"},[t.selectedPage?a("div",{staticClass:"portlet__head"},[a("div",{staticClass:"portlet__head-label"},["editform"==t.selectedPage?a("h3",{staticClass:"portlet__head-title"},[t._v("\n                               "+t._s(t.$canWrite("EMAIL_TEMPLATES")?t.$t("LBL_EDITING")+" -":"")+"\n                                "),a("span",{staticClass:"editing-txt"},[t._v(t._s(t.editText))])]):t._e()]),t._v(" "),"editform"==t.selectedPage?a("div",{staticClass:"portlet__head-toolbar"},[a("div",{staticClass:"actions"},[a("button",{staticClass:"btn btn-light mr-2",attrs:{type:"reset"},on:{"!click":function(a){return t.openPreviewPopup()}}},[a("svg",[a("use",{attrs:{"xlink:href":t.baseUrl+"/admin/images/retina/sprite.svg#view"}})])])]),t._v(" "),t._m(2),t._v(" "),a("b-popover",{staticClass:"popover-cover",attrs:{target:"tooltip-target-1",triggers:"hover",placement:"top"}},[a("div",{staticClass:"list-stats"},[a("div",{staticClass:"lable"},[a("span",{staticClass:"stats_title"},[t._v(t._s(t.$t("LBL_LAST_UPDATED"))+":")]),t._v(" "),a("span",{staticClass:"time"},[t._v(t._s(t.updatedByUser?t.updatedByUser+" |":"")+" "+t._s(t._f("formatDateTime")(t.updatedAt)))])])])])],1):t._e()]):t._e(),t._v(" "),t.selectedPage?a("div",{staticClass:"portlet__body",class:[t.$canWrite("EMAIL_TEMPLATES")?"":"disabledbutton"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.etpl_id,expression:"adminsData.etpl_id"}],attrs:{type:"hidden",name:"id"},domProps:{value:t.adminsData.etpl_id},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"etpl_id",a.target.value)}}}),t._v(" "),a("div",{staticClass:"section"},[a("div",{staticClass:"section__body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("LBL_EMAIL_TEMPLATE_NAME"))+" "),a("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.etpl_name,expression:"adminsData.etpl_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"etpl_name","data-vv-as":t.$t("LBL_EMAIL_TEMPLATE_NAME"),"data-vv-validate-on":"none"},domProps:{value:t.adminsData.etpl_name},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"etpl_name",a.target.value)}}}),t._v(" "),t.errors.first("etpl_name")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("etpl_name")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.$t("LBL_EMAIL_SUBJECT"))+" "),a("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.etpl_subject,expression:"adminsData.etpl_subject"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"etpl_subject","data-vv-as":t.$t("LBL_EMAIL_SUBJECT"),"data-vv-validate-on":"none"},domProps:{value:t.adminsData.etpl_subject},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"etpl_subject",a.target.value)}}}),t._v(" "),t.errors.first("etpl_subject")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("etpl_subject")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"d-flex justify-content-between"},[a("label",[t._v(t._s(t.$t("LBL_EMAIL_BODY"))+"  "),a("span",{staticClass:"required"},[t._v("*")])]),t._v(" "),a("a",{staticClass:"links",attrs:{href:"javascript:;"},on:{click:t.resetTemplate}},[t._v(" "+t._s(t.$t("LNK_RESET")))])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.adminsData.etpl_body,expression:"adminsData.etpl_body"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{id:"editor",name:"etpl_body","data-vv-as":t.$t("LBL_EMAIL_BODY"),"data-vv-validate-on":"none"},domProps:{value:t.adminsData.etpl_body},on:{input:function(a){a.target.composing||t.$set(t.adminsData,"etpl_body",a.target.value)}}}),t._v(" "),t.errors.first("etpl_body")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("etpl_body")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("label",[t._v(t._s(t.$t("LBL_REPLACEMENT_VARIABLES")))]),t._v(" "),t.adminsData.etpl_replacements?a("ul",{staticClass:"click-to-copy"},t._l(JSON.parse(t.adminsData.etpl_replacements),(function(e,s){return a("li",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:s,attrs:{title:[1==t.copied?t.$t("LBL_COPIED_TO_CLIPBOARD"):t.$t("LBL_CLICK_TO_COPY")],"data-val":s},on:{mouseover:function(a){t.copied=!1},click:function(a){return t.copyToClipboard(s)},mousedown:function(t){return t.target.classList.add("bounceIn")},mouseup:function(t){return t.target.classList.remove("bounceIn")}}},[a("div",{staticClass:"text"},[t._v(t._s(e))])])})),0):t._e()])])])])]):t._e(),t._v(" "),""==t.selectedPage?a("div",{staticClass:"portlet__body"},[a("div",{staticClass:"no-data-found"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:this.$noDataImage(),alt:""}})]),t._v(" "),a("div",{staticClass:"data"},[a("p",[t._v("\n                                    "+t._s(t.$t("LBL_EMAIL_TEMPLATES_INFO"))+"\n                                ")])])])]):t._e(),t._v(" "),""!=t.selectedPage?a("div",{staticClass:"portlet__foot"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("button",{staticClass:"btn btn-secondary",attrs:{type:"reset"},on:{click:function(a){return t.cancel()}}},[t._v(t._s(t.$t("BTN_DISCARD")))])]),t._v(" "),a("div",{staticClass:"col-auto"},["editform"==t.selectedPage?a("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:!t.isComplete||1==t.clicked||!t.$canWrite("EMAIL_TEMPLATES")},on:{click:function(a){return t.updateRecord()}}},[t._v(t._s(t.$t("BTN_EMAIL_TEMPLATES_UPDATE")))]):t._e()])])]):t._e()]),t._v(" "),a("preview-model",{attrs:{templateName:t.adminsData.etpl_subject,footer:t.footer,body:t.adminsData.etpl_body,header:t.header}})],1)])])])}),[function(){var t=this._self._c;return t("span",{staticClass:"input-icon__icon input-icon__icon--left"},[t("span",[t("i",{staticClass:"la la-search"})])])},function(){var t=this._self._c;return t("span",[t("i",{staticClass:"fas fa-times"})])},function(){var t=this._self._c;return t("div",{staticClass:"portlet__head-actions",attrs:{id:"tooltip-target-1"}},[t("i",{staticClass:"fas fa-info-circle"})])}],!1,null,null,null);a.default=r.exports},LXib:function(t,a,e){"use strict";var s={props:["header","footer","body","templateName"],computed:{pageHtml:function(){return this.header+'<div class="body" role="body" style="margin:0 auto;max-width:628px;" data-width_container="max-width" max-width="628px">'+this.body+"</div>"+this.footer}}},i=e("KHd+"),r=Object(i.a)(s,(function(){var t=this,a=t._self._c;return a("b-modal",{attrs:{id:"previewModel",size:"lg",centered:"",title:"BootstrapVue"},scopedSlots:t._u([{key:"modal-header",fn:function(){return[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.templateName+" - "+t.$t("LBL_PREVIEW")))]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(a){return t.$bvModal.hide("previewModel")}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[a("button",{staticClass:"btn btn-brand",attrs:{type:"button"},on:{click:function(a){return t.$bvModal.hide("previewModel")}}},[t._v(t._s(t.$t("BTN_CLOSE")))])]},proxy:!0}])},[t._v(" "),a("perfect-scrollbar",{style:"max-height: 600px"},[a("div",{domProps:{innerHTML:t._s(t.pageHtml)}})])],1)}),[],!1,null,null,null);a.a=r.exports},hlhj:function(t,a,e){"use strict";(function(t,s){var i=e("LXib"),r={etpl_id:"",etpl_name:"",etpl_subject:"",etpl_body:"",etpl_replacements:"",etpl_default_body:""},n={search:""};a.a={components:{"preview-model":i.a},data:function(){return{copied:!1,activeThemeUrl:activeThemeUrl,adminBaseUrl:adminBaseUrl,baseUrl:baseUrl,ModalID:"#formModel",selectedPage:!1,records:[],pagination:[],clicked:0,loading:!1,adminsData:r,searchData:n,search:"",footer:"",header:"",editText:"",myPlugins:["advlist autolink lists link image charmap","searchreplace visualblocks code fullscreen","print preview anchor insertdatetime media","paste code help wordcount table"],toolBar:"undo redo | formatselect | bold italic |                 alignleft aligncenter alignright |                 image | preview | fullscreen",updatedByUser:"",updatedAt:""}},computed:{isComplete:function(){return this.adminsData.etpl_subject&&this.adminsData.etpl_body}},methods:{searchRecords:function(){this.pageRecords(this.pagination.current_page)},currentPage:function(t){this.searchRecords()},pageRecords:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=e;var s=this.$serializeData(this.searchData);void 0!==this.pagination.per_page&&s.append("per_page",this.pagination.per_page),this.$http.post(adminBaseUrl+"/email-templates/list?page="+t,s).then((function(t){a.records=t.data.data.data,a.loading=!1,a.pagination=t.data.data}))},editRecord:function(t){var a=this,e=this;this.$http.get(adminBaseUrl+"/email-templates/"+t.etpl_id+"/record").then((function(t){a.emptyFormValues(),a.emptyUpdatedFieldValue(),a.adminsData.etpl_id=t.data.data.etpl_id,a.adminsData.etpl_subject=t.data.data.etpl_subject,a.adminsData.etpl_name=t.data.data.etpl_name,a.adminsData.etpl_body=t.data.data.etpl_body,a.adminsData.etpl_default_body=t.data.data.etpl_default_body,a.adminsData.etpl_replacements=t.data.data.etpl_replacements,a.editText=t.data.data.etpl_subject,a.footer=t.data.data.footer,a.header=t.data.data.header,a.selectedPage="editform",null!=t.data.data.updated_at&&"admin_username"in t.data.data.updated_at&&(a.updatedByUser=t.data.data.updated_at.admin_username),a.updatedAt=t.data.data.etpl_updated_at?t.data.data.etpl_updated_at:"",setTimeout((function(){e.initTinyMce(t.data.data.etpl_body)}),20)}))},updateRecord:function(){var a=this;this.$validator.validateAll().then((function(e){if(e){var s=a.adminsData;if(""!=s.etpl_id){a.clicked=1;var i=a.$serializeData(s);i.append("_method","put"),a.$http.post(adminBaseUrl+"/email-templates/"+s.etpl_id,i).then((function(e){a.clicked=0,0!=e.data.status?(t.success(e.data.message,"",t.options),a.pageRecords(a.pagination.current_page),a.cancel()):t.error(e.data.message,"",t.options)}),(function(t){a.validateErrors(t)}))}}}))},cancel:function(){this.selectedPage=!1},openPreviewPopup:function(){event.stopPropagation(),this.$bvModal.show("previewModel")},validateErrors:function(t){var a=this,e=t.data;Object.keys(e.errors).forEach((function(t){a.errors.add({field:t,msg:e.errors[t][0]})}))},resetTemplate:function(){this.adminsData.etpl_body=this.adminsData.etpl_default_body,this.initTinyMce(this.adminsData.etpl_body)},emptyFormValues:function(){this.adminsData={etpl_id:"",etpl_name:"",etpl_subject:"",etpl_body:"",etpl_replacements:"",etpl_default_body:""},this.editText="",this.errors.clear()},initTinyMce:function(t){var a=this;tinymce.remove(),tinymce.init({selector:"#editor",height:500,menubar:!0,branding:!1,plugins:this.myPlugins,toolbar:this.toolBar,images_upload_url:adminBaseUrl+"/editor/images",images_upload_credentials:!0,setup:function(e){e.on("init",(function(a){e.setContent(t)})),e.on("change",(function(t){a.adminsData.etpl_body=e.getContent()}))}})},emptyUpdatedFieldValue:function(){this.updatedByUser="",this.updatedAt=""},copyToClipboard:function(t){var a=s("<input>");s("body").append(a),a.val(t).select(),document.execCommand("copy"),a.remove(),this.copied=!0}},mounted:function(){var t=window.location.pathname;t=t.split("/"),this.pageRecords(1,!0),s("#preview").on("click",(function(){s("#previewContent").html(app.adminsData.etpl_body)})),s(document).on("click",".modal-backdrop",(function(){data.show=!1,s("body").removeClass("modal-open"),s(".modal-backdrop").remove()}))}}}).call(this,e("hUol"),e("EVdn"))}}]);