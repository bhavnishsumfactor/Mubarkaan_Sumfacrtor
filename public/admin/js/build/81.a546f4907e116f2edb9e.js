(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{FLIK:function(a,s,t){"use strict";(function(a){var t={admin_id:"",admin_name:"",admin_username:"",admin_email:"",admin_phone_country_id:"",admin_phone:"",admin_role_id:"",admin_password:"",admin_confirm_password:""};s.a={data:function(){return{baseUrl:baseUrl,passwordUpdate:!1,records:[],adminsData:t,roles:[],clicked:0,defaultCountryCode:"",countryCode:"",unmaskedPhoneNumber:"",createdByUser:"",updatedByUser:"",updatedAt:"",createdAt:"",pswd_info:0,displayConfirmPasswordCheck:!1,changePasswordFormValidated:!1,passwordValidate:{length:!1,letter:!1,capital:!1,number:!1,special:!1},passClicked:0}},computed:{isComplete:function(){return this.adminsData.admin_name&&this.adminsData.admin_username&&this.adminsData.admin_email&&this.adminsData.admin_phone_country_id&&this.adminsData.admin_phone&&this.adminsData.admin_role_id}},methods:{validateRecord:function(){var a=this;this.$validator.validateAll().then((function(s){if(s){a.clicked=1;var t=a.adminsData;a.updateRecord(t)}else a.clicked=0}))},updateRecord:function(s){var t=this;""!=this.unmaskedPhoneNumber&&(s.admin_phone=this.unmaskedPhoneNumber);var i=this.$serializeData(s);i.append("country_code",this.countryCode),i.append("_method","PUT"),this.$http.post(adminBaseUrl+"/sub-admins/"+s.admin_id,i).then((function(s){if(0==s.data.status)return t.clicked=0,void a.error(s.data.message,"",a.options);a.success(s.data.message,"",a.options),t.clicked=0,t.$router.push({name:"subAdmins"})}),(function(a){t.clicked=0,t.validateErrors(a)}))},validateErrors:function(a){var s=this,t=a.data;Object.keys(t.errors).forEach((function(a){s.errors.add({field:a,msg:t.errors[a][0]})}))},pageLoadData:function(){var a=this,s=this.$route.params.id;this.$http.get(adminBaseUrl+"/sub-admins/"+s+"/edit").then((function(s){a.roles=s.data.data.roles,a.adminsData=s.data.data.record,a.defaultCountryCode=null===s.data.data.record.country_code?"us":s.data.data.record.country_code.toLowerCase(),null!=a.adminsData.created_at&&(a.createdByUser=a.adminsData.created_at.admin_username),null!=a.adminsData.updated_at&&(a.updatedByUser=a.adminsData.updated_at.admin_username),a.updatedAt=a.adminsData.admin_updated_at?a.adminsData.admin_updated_at:"",a.createdAt=a.adminsData.admin_created_at?a.adminsData.admin_created_at:""}))},emptyFormValues:function(){this.adminsData={admin_id:"",admin_name:"",admin_username:"",admin_email:"",admin_phone_country_id:"",admin_phone:"",admin_role_id:"",admin_password:"",admin_confirm_password:""},this.errors.clear()},changeCountry:function(a){this.countryCode=a.iso2},onPhoneNumberChange:function(a,s){this.countryCode=s.country.iso2,this.unmaskedPhoneNumber=s.number.significant},emptyUpdatedFieldValue:function(){this.createdByUser="",this.updatedByUser="",this.updatedAt="",this.createdAt=""},validatePasswordForm:function(){return!Object.values(this.passwordValidate).includes(!1)&&""!=this.adminsData.admin_password&&""!=this.adminsData.admin_confirm_password&&this.adminsData.admin_password==this.adminsData.admin_confirm_password},validatePasswordConfirmPassword:function(){return this.adminsData.admin_password==this.adminsData.admin_confirm_password},onPasswordInput:function(a){var s=a.target.value;s.length<8?this.passwordValidate.length=!1:this.passwordValidate.length=!0,s.match(/[A-z]/)?this.passwordValidate.letter=!0:this.passwordValidate.letter=!1,s.match(/[A-Z]/)?this.passwordValidate.capital=!0:this.passwordValidate.capital=!1,s.match(/[^\w]/)?this.passwordValidate.special=!0:this.passwordValidate.special=!1,s.match(/\d/)?this.passwordValidate.number=!0:this.passwordValidate.number=!1,this.changePasswordFormValidated=this.displayConfirmPasswordCheck=!!this.validatePasswordForm()},onConfirmPasswordInput:function(a){this.changePasswordFormValidated=this.displayConfirmPasswordCheck=!!this.validatePasswordForm()},openChangePasswordPopup:function(){this.adminsData.admin_password="",this.adminsData.admin_confirm_password="",this.adminsData.displayConfirmPasswordCheck=!1,this.passwordValidate={length:!1,letter:!1,capital:!1,number:!1,special:!1},this.$bvModal.show("passwordUpdateModal")},updatePassword:function(){var s=this,t=this.$route.params.id,i=this.$serializeData({admin_password:this.adminsData.admin_password,admin_confirm_password:this.adminsData.admin_confirm_password});this.$http.post(adminBaseUrl+"/sub-admins/"+t+"/password-update",i).then((function(t){if(0==t.data.status)return s.clicked=0,void a.error(t.data.message,"",a.options);a.success(t.data.message,"",a.options),s.clicked=0,s.$bvModal.hide("passwordUpdateModal")}),(function(a){s.clicked=0,s.validateErrors(a)}))}},mounted:function(){this.emptyFormValues(),this.pageLoadData()}}}).call(this,t("hUol"))},znoH:function(a,s,t){"use strict";t.r(s);var i=t("FLIK").a,e=t("KHd+"),r=Object(e.a)(i,(function(){var a=this,s=a._self._c;return s("div",[s("div",{staticClass:"subheader",attrs:{id:"subheader"}},[s("div",{staticClass:"container"},[s("div",{staticClass:"subheader__main"},[s("h3",{staticClass:"subheader__title"},[a._v(" "+a._s(a.$canWrite("ADMIN_USERS")?a.$t("LBL_EDITING")+" -":"")+" "+a._s(a.adminsData.admin_name))]),a._v(" "),s("div",{staticClass:"subheader__breadcrumbs"},[s("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[s("i",{staticClass:"flaticon2-shelter"})]),a._v(" "),s("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),s("span",{staticClass:"subheader__breadcrumbs-link"},[a._v(a._s(a.$t("LBL_USERS")))]),a._v(" "),s("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),s("router-link",{staticClass:"subheader__breadcrumbs-link",attrs:{to:{name:"subAdmins"}}},[a._v(a._s(a.$t("LBL_SUB_ADMINS")))]),a._v(" "),s("span",{staticClass:"subheader__breadcrumbs-separator"}),a._v(" "),s("span",{staticClass:"subheader__breadcrumbs-link"},[a._v(a._s(a.$t("LBL_EDIT")))])],1)])])]),a._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-center",attrs:{id:"manage-admins"}},[s("div",{staticClass:"col-lg-8"},[s("div",{staticClass:"portlet portlet-no-min-height",attrs:{id:"page_portlet"}},[s("div",{staticClass:"portlet__body",class:[a.$canWrite("ADMIN_USERS")?"":"disabledbutton"]},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_ADMIN_NAME"))+" "),s("span",{staticClass:"required"},[a._v("*")])]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_name,expression:"adminsData.admin_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"admin_name","data-vv-as":a.$t("LBL_ADMIN_NAME"),"data-vv-validate-on":"none"},domProps:{value:a.adminsData.admin_name},on:{input:function(s){s.target.composing||a.$set(a.adminsData,"admin_name",s.target.value)}}}),a._v(" "),a.errors.first("admin_name")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_name")))]):a._e()])]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_ADMIN_USERNAME"))+" "),s("span",{staticClass:"required"},[a._v("*")])]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_username,expression:"adminsData.admin_username"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",name:"admin_username","data-vv-as":a.$t("LBL_ADMIN_USERNAME"),"data-vv-validate-on":"none",disabled:""},domProps:{value:a.adminsData.admin_username},on:{input:function(s){s.target.composing||a.$set(a.adminsData,"admin_username",s.target.value)}}}),a._v(" "),a.errors.first("admin_username")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_username")))]):a._e()])]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_ADMIN_PHONE"))+" "),s("span",{staticClass:"required"},[a._v("*")])]),a._v(" "),s("div",{staticClass:"col-lg-9"},[""!=a.defaultCountryCode?s("vue-tel-input",{attrs:{defaultCountry:a.defaultCountryCode,enabledCountryCode:!0,inputClasses:"form-control",placeholder:a.$t("PLH_ENTER_PHONE_NUMBER"),validCharactersOnly:!0},on:{"country-changed":a.changeCountry,input:a.onPhoneNumberChange},model:{value:a.adminsData.admin_phone,callback:function(s){a.$set(a.adminsData,"admin_phone",s)},expression:"adminsData.admin_phone"}}):a._e(),a._v(" "),a.errors.first("admin_phone")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_phone")))]):a._e(),a._v(" "),a.errors.first("admin_phone_country_id")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_phone_country_id")))]):a._e()],1)]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_ADMIN_EMAIL"))+" "),s("span",{staticClass:"required"},[a._v("*")])]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_email,expression:"adminsData.admin_email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"email",name:"admin_email","data-vv-as":a.$t("LBL_ADMIN_EMAIL"),"data-vv-validate-on":"none"},domProps:{value:a.adminsData.admin_email},on:{input:function(s){s.target.composing||a.$set(a.adminsData,"admin_email",s.target.value)}}}),a._v(" "),a.errors.first("admin_email")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_email")))]):a._e(),a._v(" "),s("span",{staticClass:"form-text text-muted"},[s("a",{attrs:{href:"javascript:;"},on:{click:a.openChangePasswordPopup}},[a._v(a._s(a.$t("LNK_CHANGE_PASSWORD")))])])])]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_ADMIN_ROLE"))+" "),s("span",{staticClass:"required"},[a._v("*")])]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_role_id,expression:"adminsData.admin_role_id"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"admin_role_id","data-vv-as":a.$t("LBL_ADMIN_ROLE"),"data-vv-validate-on":"none"},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.adminsData,"admin_role_id",s.target.multiple?t:t[0])}}},[s("option",{attrs:{value:"",disabled:""}},[a._v(a._s(a.$t("Select one")))]),a._v(" "),a._l(a.roles,(function(t){return s("option",{key:t.role_id,domProps:{value:t.role_id}},[a._v(a._s(t.role_name))])}))],2),a._v(" "),a.errors.first("admin_role_id")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_role_id")))]):a._e()])]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_CREATED")))]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("span",{staticClass:"ml-auto"},[a._v(a._s(a.createdByUser?a.createdByUser+" |":"")+"  "),s("span",{staticClass:"time"},[a._v(a._s(a._f("formatDateTime")(a.createdAt)))])])])]),a._v(" "),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_LAST_UPDATED")))]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("span",{staticClass:"ml-auto"},[a._v(a._s(a.updatedByUser?a.updatedByUser+" |":"")+"  "),s("span",{staticClass:"time"},[a._v(a._s(a._f("formatDateTime")(a.updatedAt)))])])])])]),a._v(" "),s("div",{staticClass:"portlet__foot"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"subAdmins"}}},[a._v(a._s(a.$t("BTN_DISCARD")))])],1),a._v(" "),s("div",{staticClass:"col-auto"},[s("button",{staticClass:"btn btn-wide btn-brand gb-btn gb-btn-primary",class:1==a.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:!a.isComplete||1==a.clicked||!a.$canWrite("ADMIN_USERS")},on:{click:function(s){return a.validateRecord()}}},[a._v(a._s(a.$t("BTN_SUBADMIN_UPDATE")))])])])])])])])]),a._v(" "),s("b-modal",{attrs:{id:"passwordUpdateModal",centered:"",title:"BootstrapVue"},scopedSlots:a._u([{key:"modal-header",fn:function(){return[s("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[a._v(a._s(a.$t("LBL_CHANGE_PASSWORD")))]),a._v(" "),s("button",{staticClass:"close",attrs:{type:"button"},on:{click:function(s){return a.$bvModal.hide("passwordUpdateModal")}}})]},proxy:!0},{key:"modal-footer",fn:function(){return[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button"},on:{click:function(s){return a.$bvModal.hide("passwordUpdateModal")}}},[a._v(a._s(a.$t("BTN_DISCARD")))]),a._v(" "),s("button",{staticClass:"btn btn-brand",attrs:{type:"button",disabled:!a.changePasswordFormValidated||1==a.passClicked},on:{click:function(s){return a.updatePassword()}}},[a._v("\n                "+a._s(a.$t("BTN_CHANGE_PASSWORD_SUBMIT")))])]},proxy:!0}])},[a._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_PASSWORD")))]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("div",{staticClass:"input-icon input-icon--right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_password,expression:"adminsData.admin_password"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],ref:"new-password",staticClass:"form-control",attrs:{type:"password",name:"admin_password",autocomplete:"new-password","data-vv-as":a.$t("LBL_PASSWORD")},domProps:{value:a.adminsData.admin_password},on:{focus:function(s){a.pswd_info=1},blur:function(s){a.pswd_info=0},keyup:function(s){return a.onPasswordInput(s)},input:function(s){s.target.composing||a.$set(a.adminsData,"admin_password",s.target.value)}}}),a._v(" "),Object.values(a.passwordValidate).includes(!1)?a._e():s("div",{staticClass:"input-icon__icon input-icon__icon--right"},[s("span",[s("i",{staticClass:"password-toggle"},[s("img",{attrs:{src:a.baseUrl+"/admin/images/retina/check.svg",width:"16px",height:"16px"}})])])]),a._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:a.pswd_info,expression:"pswd_info"}],attrs:{id:"pswd_info"}},[s("h4",[a._v(a._s(a.$t("LBL_PASSWORD_MUST_CONTAIN"))+":")]),a._v(" "),s("ul",[s("li",{class:[!0===a.passwordValidate.length?"valid":"invalid"],attrs:{id:"length"}},[a._v(a._s(a.$t("MSG_VALIDATE_LENGTH")))]),a._v(" "),s("li",{class:[!0===a.passwordValidate.letter?"valid":"invalid"],attrs:{id:"letter"}},[a._v(a._s(a.$t("MSG_VALIDATE_LETTER")))]),a._v(" "),s("li",{class:[!0===a.passwordValidate.capital?"valid":"invalid"],attrs:{id:"capital"}},[a._v(a._s(a.$t("MSG_VALIDATE_UPPERCASE")))]),a._v(" "),s("li",{class:[!0===a.passwordValidate.number?"valid":"invalid"],attrs:{id:"number"}},[a._v(a._s(a.$t("MSG_VALIDATE_NUMBER")))]),a._v(" "),s("li",{class:[!0===a.passwordValidate.special?"valid":"invalid"],attrs:{id:"special"}},[a._v(a._s(a.$t("MSG_VALIDATE_SPECIAL_CHAR")))])])]),a._v(" "),a.errors.first("admin_password")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_password")))]):a._e()])])])]),a._v(" "),s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-lg-3 col-form-label"},[a._v(a._s(a.$t("LBL_CONFIRM_PASSWORD")))]),a._v(" "),s("div",{staticClass:"col-lg-9"},[s("div",{staticClass:"input-icon input-icon--right"},[s("input",{directives:[{name:"model",rawName:"v-model",value:a.adminsData.admin_confirm_password,expression:"adminsData.admin_confirm_password"}],ref:"confirm-password",staticClass:"form-control",attrs:{type:"password",name:"admin_confirm_password",autocomplete:"new-password"},domProps:{value:a.adminsData.admin_confirm_password},on:{keyup:function(s){return a.onConfirmPasswordInput(s)},input:function(s){s.target.composing||a.$set(a.adminsData,"admin_confirm_password",s.target.value)}}}),a._v(" "),!0===a.displayConfirmPasswordCheck?s("div",{staticClass:"input-icon__icon input-icon__icon--right"},[s("span",[s("i",{staticClass:"password-toggle"},[s("img",{attrs:{src:a.baseUrl+"/admin/images/retina/check.svg",width:"16px",height:"16px"}})])])]):a._e(),a._v(" "),!1===a.displayConfirmPasswordCheck?s("div",{staticClass:"input-icon__icon input-icon__icon--right"},[s("span",[s("i",{staticClass:"password-toggle"},[s("img",{attrs:{src:a.baseUrl+"/admin/images/retina/check.svg",width:"16px",height:"16px"}})])])]):a._e(),a._v(" "),a.errors.first("admin_confirm_password")?s("span",{staticClass:"error text-danger"},[a._v(a._s(a.errors.first("admin_confirm_password")))]):a._e()])])])])])])],1)}),[],!1,null,null,null);s.default=r.exports}}]);