(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{"9NEm":function(t,a,e){"use strict";(function(t){a.a={data:function(){return{bpcomment_content:"",record:{user_fname:"",user_lname:""},comments:[],clicked:0,businessName:"",createdByUser:"",updatedByUser:"",updatedAt:"",createdAt:""}},computed:{isComplete:function(){return this.bpcomment_content}},methods:{pageLoadData:function(){var t=this;this.bpcomment_content="";var a=this.$route.params.id;this.$http.get(adminBaseUrl+"/blog/comments/"+a).then((function(a){t.record=a.data.data.postDetail,t.comments=a.data.data.postComments,t.businessName=a.data.data.businessName,null!=a.data.data.lastCommentedAdmin.created_at&&"admin_username"in a.data.data.lastCommentedAdmin.created_at&&(t.createdByUser=a.data.data.lastCommentedAdmin.created_at.admin_username),null!=a.data.data.lastCommentedAdmin.updated_at&&"admin_username"in a.data.data.lastCommentedAdmin.updated_at&&(t.updatedByUser=a.data.data.lastCommentedAdmin.updated_at.admin_username),t.updatedAt=a.data.data.lastCommentedAdmin.bpcomment_updated_at?a.data.data.lastCommentedAdmin.bpcomment_updated_at:"",t.createdAt=a.data.data.lastCommentedAdmin.bpcomment_created_at?a.data.data.lastCommentedAdmin.bpcomment_created_at:""}))},validateRecord:function(){var t=this;this.$validator.validateAll().then((function(a){a?(t.clicked=1,t.saveRecord()):t.clicked=0}))},saveRecord:function(){var a=this,e=this.$route.params.id,s=this.$serializeData({bpcomment_content:this.bpcomment_content});s.append("comment_id",e),this.$http.post(adminBaseUrl+"/blog/comments",s).then((function(e){0!=e.data.status?(t.success(e.data.message,"",t.options),a.clicked=0,a.$router.push({name:"blogComment"})):t.error(e.data.message,"",t.options)}),(function(t){a.clicked=0,a.validateErrors(t)}))},validateErrors:function(t){var a=this,e=t.data;Object.keys(e.errors).forEach((function(t){a.errors.add({field:t,msg:e.errors[t][0]})}))},onSwitchStatus:function(a,e){var s=this.$serializeData({status:a.target.checked});this.$http.post(adminBaseUrl+"/blog/comments/status/"+e,s).then((function(a){t.success(a.data.message,"",t.options)}))}},mounted:function(){this.pageLoadData()}}}).call(this,e("hUol"))},zLcN:function(t,a,e){"use strict";e.r(a);var s=e("9NEm").a,r=e("KHd+"),n=Object(r.a)(s,(function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"subheader",attrs:{id:"subheader"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"subheader__main"},[a("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_COMMENT_DETAIL")))]),t._v(" "),a("div",{staticClass:"subheader__breadcrumbs"},[a("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[a("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_CMS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_BLOGS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("router-link",{staticClass:"subheader__breadcrumbs-link",attrs:{to:{name:"blogComment"}}},[t._v(t._s(t.$t("LBL_COMMENTS")))]),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),a("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_DETAIL")))])],1)])])]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"row justify-content-center"},[a("div",{staticClass:"col-lg-10"},[a("div",{staticClass:"portlet"},[a("div",{staticClass:"portlet__body"},[a("table",{staticClass:"table"},[a("thead",[a("th",{attrs:{width:"12%"}},[t._v(t._s(t.$t("LBL_AUTHOR_NAME")))]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_AUTHOR_EMAIL")))]),t._v(" "),a("th",{attrs:{width:"12%"}},[t._v(t._s(t.$t("LBL_POSTED_ON")))]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_USER_IP")))]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_USER_AGENT")))]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_ARTICLE_TITLE")))]),t._v(" "),a("th",[t._v(t._s(t.$t("LBL_PUBLISHED_ON")))])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v(t._s(t.record.user_fname+" "+t.record.user_lname))]),t._v(" "),a("td",[t._v(t._s(t.record.user_email))]),t._v(" "),a("td",[t._v(t._s(t._f("formatDate")(t.record.bpcomment_added_on)))]),t._v(" "),a("td",[t._v(t._s(t.record.bpcomment_user_ip))]),t._v(" "),a("td",[t._v(t._s(t.record.bpcomment_user_agent))]),t._v(" "),a("td",[t._v(t._s(t.record.post_title))]),t._v(" "),a("td",[a("label",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"switch switch--sm",class:[t.$canWrite("BLOGS")?"":"disabledbutton no-drop"],attrs:{title:1==t.record.bpcomment_approved?t.$t("TTL_UNPUBLISH"):t.$t("TTL_PUBLISH")}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.record.bpcomment_approved,expression:"record.bpcomment_approved"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.record.bpcomment_approved)?t._i(t.record.bpcomment_approved,null)>-1:t.record.bpcomment_approved},on:{change:[function(a){var e=t.record.bpcomment_approved,s=a.target,r=!!s.checked;if(Array.isArray(e)){var n=t._i(e,null);s.checked?n<0&&t.$set(t.record,"bpcomment_approved",e.concat([null])):n>-1&&t.$set(t.record,"bpcomment_approved",e.slice(0,n).concat(e.slice(n+1)))}else t.$set(t.record,"bpcomment_approved",r)},function(a){return t.onSwitchStatus(a,t.record.bpcomment_id)}]}}),t._v(" "),a("span")])])])])])]),t._v(" "),a("div",{staticClass:"portlet__body"},[a("div",{staticClass:"pb-4"},[a("div",{staticClass:"mb-4"},[a("div",{},[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.record.user_fname+" "+t.record.user_lname))])]),t._v(" "),a("div",{staticClass:"bg-gray p-4"},[t._v("\n                                    "+t._s(t.record.bpcomment_content)+"\n                                ")])]),t._v(" "),t._l(t.comments,(function(e){return a("div",{key:e.bpcomment_id,staticClass:"mb-4"},[a("div",{},[a("a",{attrs:{href:"javascript:;"}},[t._v(t._s(t.businessName))])]),t._v(" "),a("div",{staticClass:"bg-gray p-4"},[t._v("\n                                    "+t._s(e.bpcomment_content)+"\n                                ")]),t._v(" "),a("span",{staticClass:""},[t._v(t._s(t._f("formatDateTime")(e.bpcomment_created_at))+" ")])])}))],2),t._v(" "),a("div",{},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"exampleTextarea"}},[t._v(t._s(t.$t("LBL_COMMENT")))]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.bpcomment_content,expression:"bpcomment_content"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"bpcomment_content",rows:"3","data-vv-as":t.$t("LBL_COMMENT"),"data-vv-validate-on":"none"},domProps:{value:t.bpcomment_content},on:{input:function(a){a.target.composing||(t.bpcomment_content=a.target.value)}}}),t._v(" "),t.errors.first("bpcomment_content")?a("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("bpcomment_content")))]):t._e()])])]),t._v(" "),a("div",{staticClass:"portlet__foot"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("router-link",{staticClass:"btn btn-secondary btn-wide",attrs:{to:{name:"blogComment"}}},[t._v(t._s(t.$t("BTN_DISCARD"))+"\n                                ")])],1),t._v(" "),a("div",{staticClass:"col-auto"},[a("button",{staticClass:"btn btn-wide btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"button",disabled:!t.isComplete||1==t.clicked||!t.$canWrite("BLOGS")},on:{click:function(a){return t.validateRecord()}}},[t._v(t._s(t.$t("BTN_BLOG_COMMENT_REPLY_SUBMIT")))])])])])])])])])])}),[],!1,null,null,null);a.default=n.exports}}]);