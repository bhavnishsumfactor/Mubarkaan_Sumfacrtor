(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{SIXp:function(e,r,t){"use strict";(function(e){var a=t("1F/t"),s={currency_id:"",currency_name:"",currency_code:"",currency_symbol:"",currency_position:"",currency_value:"",currency_is_default:0};r.a={components:{"vue-bootstrap-typeahead":a.a},data:function(){return{records:[],adminsData:s,currencies:[],currenciesArray:[],disableSymbol:0,clicked:0}},computed:{isComplete:function(){return this.adminsData.currency_name&&this.adminsData.currency_code&&this.adminsData.currency_position&&this.adminsData.currency_symbol}},methods:{createRecord:function(){var r=this;this.$validator.validateAll().then((function(t){if(t){var a=r.adminsData;if(a.currency_code="",Object.keys(r.currencies).forEach((function(e){r.currencies[e].currencyName==a.currency_name&&(a.currency_name=r.currencies[e].currencyName,a.currency_code=r.currencies[e].id,void 0!==r.currencies[e].currencySymbol&&(a.currency_symbol=r.currencies[e].currencySymbol))})),void 0===a.currency_code||""==a.currency_code)return void e.error("Please select a valid currency.","",e.options);r.clicked=1;var s=r.$serializeData(a);r.$http.post(adminBaseUrl+"/currencies",s).then((function(t){if(0==t.data.status)return r.clicked=0,void e.error(t.data.message,"",e.options);r.currencies=[],e.success(t.data.message,"",e.options),r.clicked=0,r.$router.push({name:"currencies"})}),(function(e){r.clicked=0,r.validateErrors(e)}))}else r.clicked=0}))},validateErrors:function(e){var r=this,t=e.data;Object.keys(t.errors).forEach((function(e){r.errors.add({field:e,msg:t.errors[e][0]})}))},onSelectRecord:function(e){var r=this;Object.keys(this.currencies).forEach((function(t){var a=r.currencies[t];a.currencyName==e&&(r.adminsData.currency_name=a.currencyName,r.adminsData.currency_code=a.id,void 0!==a.currencySymbol?(r.adminsData.currency_symbol=a.currencySymbol,r.disableSymbol=1):(r.disableSymbol=0,r.adminsData.currency_symbol=""))}))},getCurrencies:function(){var e=this;this.$http.get(adminBaseUrl+"/currencies/fetchall").then((function(r){e.currencies=r.data.data.currencies;var t=r.data.data.currenciesArray;e.currenciesArray=Object.values(t)}))},emptyFormValues:function(){this.adminsData={currency_id:"",currency_name:"",currency_code:"",currency_symbol:"",currency_position:"",currency_value:"",currency_is_default:0},this.errors.clear()}},mounted:function(){this.emptyFormValues(),this.getCurrencies()}}}).call(this,t("hUol"))},Z8p6:function(e,r,t){"use strict";t.r(r);var a=t("SIXp").a,s=t("KHd+"),c=Object(s.a)(a,(function(){var e=this,r=e._self._c;return r("div",[r("div",{staticClass:"subheader",attrs:{id:"subheader"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"subheader__main"},[r("h3",{staticClass:"subheader__title"},[e._v(e._s(e.$t("LBL_ADD_CURRENCY")))])])])]),e._v(" "),r("div",{staticClass:"container"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-6"},[r("div",{staticClass:"portlet portlet--height-fluid"},[r("div",{staticClass:"portlet__body pb-0"},[r("div",{staticClass:"section"},[r("div",{staticClass:"section_body"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label"},[e._v(e._s(e.$t("LBL_CURRENCY")))]),e._v(" "),r("div",{staticClass:"col-md-9"},[r("vue-bootstrap-typeahead",{ref:"townTypeahead",attrs:{data:e.currenciesArray,placeholder:e.$t("Start typing currency name"),"max-matches":5,"min-matching-chars":1},on:{hit:e.onSelectRecord},model:{value:e.adminsData.currency_name,callback:function(r){e.$set(e.adminsData,"currency_name",r)},expression:"adminsData.currency_name"}}),e._v(" "),e.errors.first("currency_name")?r("span",{staticClass:"error text-danger"},[e._v(e._s(e.errors.first("currency_name")))]):e._e()],1)]),e._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label"},[e._v(e._s(e.$t("LBL_CURRENCY_SYMBOL")))]),e._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.adminsData.currency_symbol,expression:"adminsData.currency_symbol"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{type:"text",disabled:1==e.disableSymbol,name:"currency_symbol","data-vv-as":e.$t("Symbol"),"data-vv-validate-on":"none"},domProps:{value:e.adminsData.currency_symbol},on:{input:function(r){r.target.composing||e.$set(e.adminsData,"currency_symbol",r.target.value)}}}),e._v(" "),e.errors.first("currency_symbol")?r("span",{staticClass:"error text-danger"},[e._v(e._s(e.errors.first("currency_symbol")))]):e._e()])]),e._v(" "),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-md-3 col-form-label"},[e._v(e._s(e.$t("LBL_CURRENCY_POSITION")))]),e._v(" "),r("div",{staticClass:"col-md-9"},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.adminsData.currency_position,expression:"adminsData.currency_position"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",attrs:{name:"currency_position","data-vv-as":e.$t("Position"),"data-vv-validate-on":"none"},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.adminsData,"currency_position",r.target.multiple?t:t[0])}}},[r("option",{attrs:{value:"0"}},[e._v(e._s(e.$t("LBL_LEFT")))]),e._v(" "),r("option",{attrs:{value:"1"}},[e._v(e._s(e.$t("LBL_RIGHT")))])]),e._v(" "),e.errors.first("currency_position")?r("span",{staticClass:"error text-danger"},[e._v(e._s(e.errors.first("currency_position")))]):e._e()])])])])])])]),e._v(" "),r("div",{staticClass:"portlet__foot"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col"},[r("button",{staticClass:"btn btn-secondary btn-wide",attrs:{type:"reset"},on:{click:function(r){return e.$router.push({name:"currencies"})}}},[e._v(e._s(e.$t("BTN_DISCARD")))])]),e._v(" "),r("div",{staticClass:"col-auto"},[r("button",{staticClass:"btn btn-wide btn-brand gb-btn gb-btn-primary",class:1==e.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:!e.isComplete||1==e.clicked},on:{click:e.createRecord}},[e._v(e._s(e.$t("BTN_CURRENCY_CREATE")))])])])])])])])])])}),[],!1,null,null,null);r.default=c.exports}}]);