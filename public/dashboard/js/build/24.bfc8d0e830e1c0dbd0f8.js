(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{272:function(t,e,a){"use strict";a.r(e);var s=a(423).a,r=a(63),i={components:{imageAttributes:Object(r.a)(s,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"subheader",attrs:{id:"subheader"}},[e("div",{staticClass:"container"},[e("div",{staticClass:"subheader__main"},[e("h3",{staticClass:"subheader__title"},[t._v(t._s(t.$t("LBL_ALT_IMAGES")))]),t._v(" "),e("div",{staticClass:"subheader__breadcrumbs"},[e("router-link",{staticClass:"subheader__breadcrumbs-home",attrs:{to:{name:"dashboard"}}},[e("i",{staticClass:"flaticon2-shelter"})]),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_SEO")))]),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-separator"}),t._v(" "),e("span",{staticClass:"subheader__breadcrumbs-link"},[t._v(t._s(t.$t("LBL_ALT_IMAGES")))])],1)])])]),t._v(" "),e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-7"},[e("div",{staticClass:"portlet portlet--height-fluid"},[e("div",{staticClass:"portlet__body pb-0 bg-gray flex-grow-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("div",{staticClass:"input-group input-icon input-icon--left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.$t("PLH_SEARCH"),id:"generalSearch"},domProps:{value:t.search},on:{keyup:t.searchRecords,input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-default dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-expanded":"true"}},[t._v("\n                                                "+t._s(t._f("camelCase")(t.module_type))+"\n                                            ")]),t._v(" "),e("div",{staticClass:"dropdown-menu",attrs:{"x-placement":"top-start"}},[e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){return t.selectModule("products")}}},[t._v(t._s(t.$t("LBL_PRODUCTS")))]),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){return t.selectModule("brands")}}},[t._v(t._s(t.$t("LBL_BRANDS")))]),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){return t.selectModule("categories")}}},[t._v(t._s(t.$t("LBL_CATEGORIES")))]),t._v(" "),e("a",{staticClass:"dropdown-item",attrs:{href:"javascript:;"},on:{click:function(e){return t.selectModule("blogs")}}},[t._v(t._s(t.$t("LBL_BLOGS")))])])])])])])])]),t._v(" "),e("hr",{staticClass:"m-0"}),t._v(" "),t.records.length>0?e("div",{staticClass:"portlet__body portlet__body--fit"},[e("div",{staticClass:"section"},[e("div",{staticClass:"section__content"},[e("table",{staticClass:"table table-data table-justified"},[e("thead",[e("tr",[e("th",[t._v(t._s("#"))]),t._v(" "),e("th",[t._v(t._s(t.$t("LBL_ALT_IMAGES_RECORD_NAME")))]),t._v(" "),e("th")])]),t._v(" "),e("tbody",t._l(t.records,(function(a,s){return e("tr",{key:"listing"+s,attrs:{"data-id":a.record_id}},[e("td",{attrs:{scope:"row"}},[t._v(t._s(t.pagination.from+s))]),t._v(" "),e("td",[t.$canWrite("ALT_IMAGES")?e("div",[t._v(t._s(a.record_title))]):e("a",{attrs:{href:"javascript:;"},on:{click:function(e){return e.preventDefault(),t.editRecord(a)}}},[t._v(t._s(a.record_title))])]),t._v(" "),e("td",[e("div",{staticClass:"actions"},[e("a",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-light btn-sm btn-icon",class:[t.$canWrite("ALT_IMAGES")?"":"disabled no-drop"],attrs:{href:"javascript:;",title:t.$t("TTL_EDIT")},on:{click:function(e){return t.editRecord(a)}}},[e("svg",[e("use",{attrs:{"xlink:href":t.baseUrl+"/admin/images/retina/sprite.svg#edit-icon"}})])])])])])})),0)])])])]):t._e(),t._v(" "),t.loading?e("loader"):t._e(),t._v(" "),0==t.loading&&0==t.records.length?e("noRecordsFound"):t._e(),t._v(" "),t.records.length>0?e("div",{staticClass:"portlet__foot"},[e("pagination",{attrs:{pagination:t.pagination},on:{currentPage:t.currentPage}})],1):t._e()],1)]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"portlet portlet--height-fluid"},[t.selectedPage?e("div",{staticClass:"portlet__head"},[e("div",{staticClass:"portlet__head-label"},["editform"==t.selectedPage?e("h3",{staticClass:"portlet__head-title"},[t._v("\n                            "+t._s(t.$canWrite("ALT_IMAGES")?t.$t("LBL_EDITING")+" -":"")+" "+t._s(t.adminsData.record_title)+"\n                        ")]):t._e()]),t._v(" "),"editform"==t.selectedPage?e("div",{staticClass:"portlet__head-toolbar"},[t._m(1),t._v(" "),e("b-popover",{staticClass:"popover-cover",attrs:{target:"tooltip-target-1",triggers:"hover",placement:"top"}},[e("div",{staticClass:"list-stats"},[e("div",{staticClass:"lable"},[e("span",{staticClass:"stats_title"},[t._v(t._s(t.$t("LBL_LAST_UPDATED"))+":")]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t.updatedByUser?t.updatedByUser+" |":"")+" "+t._s(t._f("formatDateTime")(t.updatedAt)))])])])])],1):t._e()]):t._e(),t._v(" "),t.selectedPage?e("div",{staticClass:"portlet__body",class:[t.$canWrite("ALT_IMAGES")?"":"disabledbutton"]},[e("perfect-scrollbar",{style:"max-height: 480px; overflow-x: hidden;"},[e("ul",{staticClass:"list-group"},t._l(t.adminsData.images,(function(a,s){return e("li",{key:"records"+s},[e("div",{staticClass:"row mb-3 ml-0 mr-0"},[e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"rounded border imgthumb"},[e("img",{attrs:{src:"yokart/image/"+a.afile_id+"/thumb?t="+t.$timestamp(a.afile_updated_at)}})]),t._v(" "),"products"==t.module_type&&""!=a.variant_name?e("small",[t._v("("+t._s(a.variant_name)+")")]):t._e()]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("LBL_ALT_IMAGE_TITLE")))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.afile_attribute_title,expression:"image.afile_attribute_title"}],staticClass:"form-control",attrs:{type:"text",name:"afile_attribute_title",disabled:!t.$canWrite("ALT_IMAGES")},domProps:{value:a.afile_attribute_title},on:{input:function(e){e.target.composing||t.$set(a,"afile_attribute_title",e.target.value)}}}),t._v(" "),t.errors.first("afile_attribute_title")?e("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("afile_attribute_title")))]):t._e()])]),t._v(" "),e("div",{staticClass:"col-md-5"},[e("div",{staticClass:"form-group"},[e("label",[t._v(t._s(t.$t("LBL_ALT_IMAGE_ALT"))+" ")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:a.afile_attribute_alt,expression:"image.afile_attribute_alt"}],staticClass:"form-control",attrs:{type:"text",name:"afile_attribute_alt",disabled:!t.$canWrite("ALT_IMAGES")},domProps:{value:a.afile_attribute_alt},on:{input:function(e){e.target.composing||t.$set(a,"afile_attribute_alt",e.target.value)}}}),t._v(" "),t.errors.first("afile_attribute_alt")?e("span",{staticClass:"error text-danger"},[t._v(t._s(t.errors.first("afile_attribute_alt")))]):t._e()])])])])})),0)])],1):t._e(),t._v(" "),""==t.selectedPage?e("div",{staticClass:"portlet__body"},[e("div",{staticClass:"no-data-found"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:this.$noDataImage(),alt:""}})]),t._v(" "),e("div",{staticClass:"data"},[e("p",[t._v(" "+t._s(t.$t("LBL_USE_ICONS_FOR_ADVANCED_ACTIONS")))])])])]):t._e(),t._v(" "),""!=t.selectedPage?e("div",{staticClass:"portlet__foot"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col"},[e("button",{staticClass:"btn btn-secondary",attrs:{type:"reset"},on:{click:function(e){return t.cancel()}}},[t._v(t._s(t.$t("BTN_DISCARD")))])]),t._v(" "),e("div",{staticClass:"col-auto"},["editform"==t.selectedPage&&t.adminsData.images.length>0?e("button",{staticClass:"btn btn-brand gb-btn gb-btn-primary",class:1==t.clicked&&"gb-is-loading",attrs:{type:"submit",disabled:1==t.clicked||!t.$canWrite("ALT_IMAGES")},on:{click:function(e){return t.updateRecord()}}},[t._v(t._s(t.$t("BTN_ALT_IMAGES_UPDATE")))]):t._e()])])]):t._e()])])])])])}),[function(){var t=this._self._c;return t("span",{staticClass:"input-icon__icon input-icon__icon--left"},[t("span",[t("i",{staticClass:"la la-search"})])])},function(){var t=this._self._c;return t("div",{staticClass:"portlet__head-actions",attrs:{id:"tooltip-target-1"}},[t("i",{staticClass:"fas fa-info-circle"})])}],!1,null,null,null).exports},props:["rewardTypes","reward","requestId"],data:function(){return{baseUrl:baseUrl,type:""}},methods:{rewardTitle:function(t,e){switch(this.$cleanString(this.rewardTypes[t])){case"orderearnedpoint":return'<span class="text-success">'+this.calculateTotal(e.order_products)+"</span> "+this.$t("LBL_POINTS_EARNED")+" #"+e.urp_order_id;case"orderredeemedpoint":return'<span class="text-danger">-'+Math.abs(e.points)+"</span> "+this.$t("LBL_POINTS_REDEEMED");case"expiredpoint":return'<span class="text-danger">-'+e.points+"</span> "+this.$t("LBL_POINTS_EXPIRED");case"birthdaypoint":case"registrationpoint":return'<span class="text-success">'+e.points+"</span> "+this.$t("LBL_POINTS_EARNED");case"adminupdatedpoint":return'<span class="text-success">'+Math.abs(e.points)+"</span> "+this.$t("LBL_POINTS")+" "+(e.points>0?this.$t("LBL_POINTS_CREDITED"):this.$t("LBL_POINTS_DEBITED"));case"signupbonus":return'<span class="text-success">'+Math.abs(e.points)+"</span> "+this.$t("LBL_POINTS_EARNED_AS_SIGNUP_BONUS");case"returnedpoints":return'<span class="text-danger">-'+Math.abs(e.points)+"</span> "+this.$t("LBL_POINTS_RETURNED")+" #"+e.urp_order_id;default:return""}},rewardMessage:function(t,e){switch(this.$cleanString(this.rewardTypes[t])){case"registrationpoint":var a="";return a=e.referral_phone?(""!=e.country_phonecode?"+"+e.country_phonecode+" ":"")+e.referral_phone:e.referral_email?e.referral_email:this.$t("LBL_ANONYMOUS"),this.$t("LBL_HURRAY")+"! "+a+" "+this.$t("LBL_JOINED")+" "+this.$configVal("BUSINESS_NAME");case"birthdaypoint":return this.$t("LBL_HAPPY_BIRTHDAY_HERE_ARE")+" "+e.points+" "+this.$t("LBL_POINTS_FOR_BIRTHDAY");case"orderredeemedpoint":return Math.abs(e.points)+" "+this.$t("LBL_ORDER_REDEEMED_POINTS_MESSAGE")+" #"+e.urp_order_id;case"expiredpoint":return"";case"adminupdatedpoint":return e.comments;default:return""}},addClass:function(t,e){switch(this.$cleanString(this.rewardTypes[t])){case"registrationpoint":return"referral";case"birthdaypoint":return"birthday";case"orderearnedpoint":return"earned";case"orderredeemedpoint":return"redeemed";case"expiredpoint":return"expired";case"returnedpoints":return"returned";case"adminupdatedpoint":return e>0?"credited":"debited";default:return"expired"}},addImage:function(t,e){switch(this.$cleanString(this.rewardTypes[t])){case"registrationpoint":return baseUrl+"/dashboard/media/retina/signup-points.svg";case"birthdaypoint":return baseUrl+"/dashboard/media/retina/birthday-points.svg";case"orderearnedpoint":return baseUrl+"/dashboard/media/retina/points-earned-for-product.svg";case"orderredeemedpoint":return baseUrl+"/dashboard/media/retina/product-return-deduction-points.svg";case"expiredpoint":return baseUrl+"/dashboard/media/retina/expired-points.svg";case"returnedpoints":return baseUrl+"/dashboard/media/retina/returned_points.svg";case"adminupdatedpoint":return e.points>0?baseUrl+"/dashboard/media/retina/credited-points.svg":baseUrl+"/dashboard/media/retina/dedited-points.svg";default:return baseUrl+"/dashboard/media/retina/credited-points.svg"}},calculateTotal:function(t){var e=0;return Object.keys(t).forEach((function(a){e+=parseFloat(t[a].reward_points.opc_value)})),e}}},d=Object(r.a)(i,(function(){var t=this,e=t._self._c;return e("li",{class:t.addClass(t.reward.urp_type,t.reward.points)},[e("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"accordion"+t.reward.urp_order_id+t.requestId,expression:"'accordion' + reward.urp_order_id + '' +requestId"}],staticClass:"points-timeline__block",class:[0!=t.reward.order_products.length&&4!=t.reward.urp_type?"dropdown-toggle":""],attrs:{block:""}},[e("div",{staticClass:"points-timeline__block_media"},[e("img",{attrs:{"data-yk":"",src:t.addImage(t.reward.urp_type,t.reward),alt:""}})]),t._v(" "),e("div",{staticClass:"points-timeline__block_data"},[e("div",{staticClass:"points-timeline__block_title",domProps:{innerHTML:t._s(t.rewardTitle(t.reward.urp_type,t.reward))}}),t._v(" "),e("div",{staticClass:"points-timeline__block_date"},[t._v(t._s(t.$dateTimeFormat(t.reward.date,"date")))]),t._v(" "),e("div",{staticClass:"points-timeline__block_origin",domProps:{innerHTML:t._s(t.rewardMessage(t.reward.urp_type,t.reward))}})])]),t._v(" "),e("b-collapse",{attrs:{id:"accordion"+t.reward.urp_order_id+t.requestId}},[0!=t.reward.order_products.length&&4!=t.reward.urp_type?e("ul",{staticClass:"points-list-group scroll-y"},t._l(t.reward.order_products,(function(a,s){return(null!==t.reward.refund_products?t.reward.refund_products.op_id==a.op_id&&a.reward_points.opc_value:a.reward_points.opc_value)?e("li",{key:s,staticClass:"points-list-group-item",class:[5!=t.reward.urp_type&&a.refund_points?"disabled":""]},[e("a",{attrs:{target:"_blank",href:t.baseUrl+"/product/"+a.op_product_id}},[e("div",{staticClass:"product-profile"},[e("div",{staticClass:"product-profile__thumbnail"},[e("img",{attrs:{src:t.$productImage(a.op_product_id,a.op_pov_code,a.images?a.images.afile_updated_at:"","48-64"),"data-yk":"",alt:""}})]),t._v(" "),e("div",{staticClass:"product-profile__data"},[e("div",{staticClass:"title"},[t._v(t._s(a.op_product_name))]),t._v(" "),e("div",{staticClass:"options"},[e("strong",[t._v(t._s(a.reward_points.opc_value))]),t._v("\n                "+t._s(t.$t("LBL_ORDER_EARNED_POINTS_MESSAGE"))+"\n              ")])])])])]):t._e()})),0):t._e()])],1)}),[],!1,null,null,null);e.default=d.exports},423:function(t,e,a){"use strict";(function(t){var a={afile_type:"",record_id:"",record_title:"",images:[]},s={record_title:""};e.a={data:function(){return{baseUrl:baseUrl,records:[],pagination:[],clicked:0,loading:!1,adminsData:a,searchData:s,search:"",selectedPage:"",recordId:"",module_type:"products",afile_type:"products",updatedByUser:"",updatedAt:""}},methods:{emptyFormValues:function(){this.adminsData={afile_type:"",record_id:"",record_title:"",images:[]},this.errors.clear()},pageRecords:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.loading=a,Object.assign(this.searchData,{search:this.search});var s=this.$serializeData(this.searchData);s.append("module_type",this.module_type),void 0!==this.pagination.per_page&&s.append("per_page",this.pagination.per_page),this.$http.post(adminBaseUrl+"/imagetags/modulelist?page="+t,s).then((function(t){e.records=t.data.data.records.data,e.afile_type=t.data.data.afile_type,e.pagination=t.data.data.records,e.loading=!1}))},selectModule:function(t){this.module_type=t,this.pageRecords(1),this.cancel(),this.emptyFormValues()},searchRecords:function(){this.pageRecords(this.pagination.current_page)},currentPage:function(t){this.pageRecords(t)},editRecord:function(e){var a=this;this.emptyUpdatedFieldValue();var s=this.$serializeData({afile_type:this.afile_type,record_id:e.record_id});this.$http.post(adminBaseUrl+"/imagetags/get",s).then((function(s){0!=s.data.status?(a.emptyFormValues(),a.adminsData.afile_type=a.afile_type,a.adminsData.record_id=e.record_id,a.adminsData.record_title=e.record_title,s.data.data.length>0&&(a.adminsData.images=s.data.data,null!=s.data.data[0].updated_at&&"admin_username"in s.data.data[0].updated_at&&(a.updatedByUser=s.data.data[0].updated_at.admin_username),a.updatedAt=s.data.data[0].afile_meta_updated_at?s.data.data[0].afile_meta_updated_at:"")):t.error(s.data.message,"",t.options)}),(function(t){})),this.selectedPage="editform"},updateRecord:function(){var e=this;this.$validator.validateAll().then((function(a){if(a){e.clicked=1;var s=JSON.stringify(e.adminsData.images),r=e.$serializeData({images:s});e.$http.post(adminBaseUrl+"/imagetags/update",r).then((function(a){e.clicked=0,0!=a.data.status?(t.success(a.data.message,"",t.options),e.emptyFormValues(),e.pageRecords(e.pagination.current_page),e.selectedPage=""):t.error(a.data.message,"",t.options)}),(function(t){e.clicked=0,e.validateErrors(t)}))}else e.clicked=0}))},cancel:function(){this.selectedPage=!1},emptyUpdatedFieldValue:function(){this.updatedByUser="",this.updatedAt=""},validateErrors:function(t){var e=this,a=t.data;Object.keys(a.errors).forEach((function(t){e.errors.add({field:t,msg:a.errors[t][0]})}))}},mounted:function(){this.pageRecords(1,!0)}}}).call(this,a(64))}}]);